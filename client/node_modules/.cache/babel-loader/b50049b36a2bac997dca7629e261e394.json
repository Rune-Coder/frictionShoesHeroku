{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useDispatch}from'react-redux';import{loginActions}from'../store/loginStore';function UserData(token){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var loggedin=true;var newtoken=token;useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/profile\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(newtoken)}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok)setUser(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[newtoken]);var dispatch=useDispatch();if(Object.keys(user).length===0){token=\"\";loggedin=false;}dispatch(loginActions.loginVerify({token:token,userData:user,loggedin:loggedin}));return loggedin;}export{UserData};","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/connect/userData.js"],"names":["useState","useEffect","useDispatch","loginActions","UserData","token","user","setUser","loggedin","newtoken","getData","fetch","method","headers","Authorization","res","json","data","ok","dispatch","Object","keys","length","loginVerify","userData"],"mappings":"sYAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,YAAT,KAA6B,qBAA7B,CAEA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAwB,CACpB,cAAwBL,QAAQ,CAAC,EAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,GAAIC,CAAAA,QAAQ,CAAG,IAAf,CACA,GAAIC,CAAAA,QAAQ,CAAGJ,KAAf,CAEAJ,SAAS,CAAC,UAAK,SACIS,CAAAA,OADJ,+HACX,sKAEsBC,CAAAA,KAAK,qBAAsB,CACzCC,MAAM,CAAE,KADiC,CAEzCC,OAAO,CAAC,CACJC,aAAa,kBAAYL,QAAZ,CADT,CAFiC,CAAtB,CAF3B,QAEUM,GAFV,qCASuBA,CAAAA,GAAG,CAACC,IAAJ,EATvB,QASUC,IATV,eAWI,GAAGF,GAAG,CAACG,EAAP,CACIX,OAAO,CAACU,IAAD,CAAP,CAZR,sDADW,0CAiBXP,OAAO,GAEV,CAnBQ,CAmBN,CAACD,QAAD,CAnBM,CAAT,CAsBA,GAAMU,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CAEA,GAAGkB,MAAM,CAACC,IAAP,CAAYf,IAAZ,EAAkBgB,MAAlB,GAA6B,CAAhC,CAAkC,CAC9BjB,KAAK,CAAG,EAAR,CACAG,QAAQ,CAAG,KAAX,CACH,CAEDW,QAAQ,CAAChB,YAAY,CAACoB,WAAb,CAAyB,CAC9BlB,KAAK,CAAEA,KADuB,CAE9BmB,QAAQ,CAAElB,IAFoB,CAG9BE,QAAQ,CAAEA,QAHoB,CAAzB,CAAD,CAAR,CAMA,MAAOA,CAAAA,QAAP,CACH,CAED,OAASJ,QAAT","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginActions } from '../store/loginStore';\r\n\r\nfunction UserData(token){\r\n    const [user, setUser] = useState({});\r\n    var loggedin = true;\r\n    var newtoken = token;\r\n\r\n    useEffect(() =>{\r\n        async function getData(){\r\n    \r\n            const res = await fetch(`/api/user/profile`, {\r\n                method: \"GET\",\r\n                headers:{\r\n                    Authorization: `Bearer ${newtoken}`\r\n                }\r\n            });\r\n        \r\n            const data = await res.json();\r\n            \r\n            if(res.ok)\r\n                setUser(data);\r\n    \r\n        }\r\n\r\n        getData();\r\n\r\n    }, [newtoken]);\r\n\r\n    \r\n    const dispatch = useDispatch();\r\n    \r\n    if(Object.keys(user).length === 0){\r\n        token = \"\";\r\n        loggedin = false;\r\n    }\r\n\r\n    dispatch(loginActions.loginVerify({\r\n        token: token,\r\n        userData: user,\r\n        loggedin: loggedin\r\n    }));\r\n\r\n    return loggedin;\r\n}\r\n\r\nexport { UserData };"]},"metadata":{},"sourceType":"module"}