{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{cartActions}from'../../store/cartStore';import{wishActions}from'../../store/wishStore';import StarRating from'../../card/starRating';import CartIcon from'../../icons/cartIcon';import HeartIcon from'../../icons/heartIcon';import ToastCard from'../../card/toastCard';import classes from'./productView.module.css';import loader from'../../image/sectionLoader.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProductView(props){//login authenticate\nvar loginSub=useSelector(function(state){return state.login.loggedin;});var userSub=useSelector(function(state){return state.login.userData;});var navigate=useNavigate();var _useParams=useParams(),prdct=_useParams.prdct,pid=_useParams.pid;var _prdct$split=prdct.split(\"-\"),_prdct$split2=_slicedToArray(_prdct$split,2),com=_prdct$split2[0],pname=_prdct$split2[1];var _useState=useState(\"0\"),_useState2=_slicedToArray(_useState,2),size=_useState2[0],setSize=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showPara=_useState4[0],setShowPara=_useState4[1];var _useState5=useState(\"false\"),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],setShowToast=_useState6[1];useEffect(function(){document.title='Buy '+com+' '+pname;window.scrollTo(0,0);});var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),products=_useState8[0],setProducts=_useState8[1];var dispatch=useDispatch();//fetch products data\nfunction getData(){fetch(\"/api/products/\".concat(pid),{mode:'cors'}).then(function(response){return response.json();}).then(function(data){setProducts(data);});}useEffect(function(){getData();},[]);//post cart data mongodb\nfunction postData(_x,_x2,_x3){return _postData.apply(this,arguments);}//post wish data mongodb\nfunction _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,cart,bill){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,cart:cart,bill:bill})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:case\"end\":return _context.stop();}}},_callee);}));return _postData.apply(this,arguments);}function postWishData(_x4,_x5){return _postWishData.apply(this,arguments);}function _postWishData(){_postWishData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,wish){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,wish:wish})});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _postWishData.apply(this,arguments);}if(products.message){navigate('/none',{required:true});return/*#__PURE__*/_jsx(\"div\",{className:classes.loading,children:/*#__PURE__*/_jsx(\"img\",{src:loader,alt:\"Loading...\",className:classes.loaderImg})});}if(products!=={}){var sizeHandler=function sizeHandler(event){setSize(event.target.innerText);return;};var addWish=function addWish(event){//authenticate\nif(!loginSub){navigate(\"/login\");return;}if(showToast!==\"false\")return;dispatch(wishActions.addItem({id:products._id,image:products.image,company:products.company,product:products.product,rating:products.rating,sp:products.sp,mrp:products.mrp,discount:products.discount}));setShowToast(\"wishlist\");setTimeout(function(){setShowToast(\"false\");},3000);//store wish in mongodb\nvar email=userSub.email;var wish=JSON.parse(localStorage.getItem(\"wishStore\"));postWishData(email,wish);return;};var addItem=function addItem(event){if(showToast!==\"false\")return;if(size===\"0\"){setShowPara(true);return;}setShowPara(false);dispatch(cartActions.addItem({id:products._id,image:products.image,company:products.company,product:products.product,rating:products.rating,sp:products.sp,mrp:products.mrp,discount:products.discount,quantity:1,sz:size,delfee:0}));//dispatching value to functions\nsetShowToast(\"bag\");setTimeout(function(){setShowToast(\"false\");},3000);//store cart in mongodb\nvar email=userSub.email;var cart=JSON.parse(localStorage.getItem(\"products\"));var bill=JSON.parse(localStorage.getItem(\"billStore\"));postData(email,cart,bill);return;};var remToast=function remToast(rem){setShowToast(\"false\");return;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.view,children:[showToast!==\"false\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.toast,children:[\" \",/*#__PURE__*/_jsx(ToastCard,{close:remToast,value:\"Item is added to \"+showToast}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.image,children:/*#__PURE__*/_jsx(\"img\",{src:products.image,alt:\"Sneakers\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.details,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.company,children:products.company}),/*#__PURE__*/_jsx(\"p\",{className:classes.product,children:products.product}),/*#__PURE__*/_jsxs(\"p\",{className:classes.rating,children:[/*#__PURE__*/_jsx(StarRating,{stars:products.rating}),products.rating]}),/*#__PURE__*/_jsxs(\"p\",{className:classes.price,children:[\"\\u20B9\",products.sp,\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:classes.mrp,children:[\"\\u20B9\",products.mrp]}),/*#__PURE__*/_jsxs(\"span\",{className:classes.discount,children:[\"\\xA0\\xA0(\",products.discount,\"% off)\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:classes.tax,children:\"Inclusive of all taxes\"}),/*#__PURE__*/_jsx(\"p\",{children:\"SELECT SIZE (UK)\"}),/*#__PURE__*/_jsxs(\"ul\",{className:classes.size,children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:size===\"6\"?classes.sizeActive:'',onClick:sizeHandler,children:\"6\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:size===\"7\"?classes.sizeActive:'',onClick:sizeHandler,children:\"7\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:size===\"8\"?classes.sizeActive:'',onClick:sizeHandler,children:\"8\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:size===\"9\"?classes.sizeActive:'',onClick:sizeHandler,children:\"9\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:size===\"10\"?classes.sizeActive:'',onClick:sizeHandler,children:\"10\"})})]}),showPara&&/*#__PURE__*/_jsx(\"p\",{className:classes.sizeWarning,children:\"Please select a size\"}),/*#__PURE__*/_jsxs(\"button\",{className:classes.bag,onClick:addItem,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.cartIcon,children:/*#__PURE__*/_jsx(CartIcon,{})}),\"\\xA0\\xA0\\xA0 ADD TO BAG\"]}),\"\\xA0\",/*#__PURE__*/_jsxs(\"button\",{className:classes.wish,onClick:addWish,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.heartIcon,children:/*#__PURE__*/_jsx(HeartIcon,{})}),\"\\xA0\\xA0\\xA0 WISHLIST\"]})]})]}),products.desc&&/*#__PURE__*/_jsxs(\"div\",{className:classes.productDetails,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productDetailsHead,children:\"PRODUCT DETAILS\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.details}),/*#__PURE__*/_jsx(\"p\",{className:classes.productDetailsHead,children:\"Material & Care\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.material}),/*#__PURE__*/_jsx(\"p\",{className:classes.productDetailsHead,children:\"Specifications\"}),/*#__PURE__*/_jsxs(\"ul\",{className:classes.specs,children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Type\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsType})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Toe\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsToe})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Pattern\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsPattern})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Fastening\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsFastening})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Shoe Width\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsWidth})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Sole Material\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsSole})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.productSpecsHead,children:\"Warranty\"}),/*#__PURE__*/_jsx(\"p\",{children:products.desc.specsWarranty})]})]})]})]});}return/*#__PURE__*/_jsx(\"div\",{className:classes.loading,children:/*#__PURE__*/_jsx(\"img\",{src:loader,alt:\"Loading...\",className:classes.loaderImg})});}export default ProductView;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/pages/productView/productView.js"],"names":["React","useState","useEffect","useParams","useNavigate","useSelector","useDispatch","cartActions","wishActions","StarRating","CartIcon","HeartIcon","ToastCard","classes","loader","ProductView","props","loginSub","state","login","loggedin","userSub","userData","navigate","prdct","pid","split","com","pname","size","setSize","showPara","setShowPara","showToast","setShowToast","document","title","window","scrollTo","products","setProducts","dispatch","getData","fetch","mode","then","response","json","data","postData","email","cart","bill","method","headers","body","JSON","stringify","res","postWishData","wish","message","required","loading","loaderImg","sizeHandler","event","target","innerText","addWish","addItem","id","_id","image","company","product","rating","sp","mrp","discount","setTimeout","parse","localStorage","getItem","quantity","sz","delfee","remToast","rem","view","toast","details","price","tax","sizeActive","sizeWarning","bag","cartIcon","heartIcon","desc","productDetails","productDetailsHead","material","specs","productSpecsHead","specsType","specsToe","specsPattern","specsFastening","specsWidth","specsSole","specsWarranty"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { cartActions } from '../../store/cartStore';\r\nimport { wishActions } from '../../store/wishStore';\r\n\r\nimport StarRating from '../../card/starRating';\r\nimport CartIcon from '../../icons/cartIcon';\r\nimport HeartIcon from '../../icons/heartIcon';\r\nimport ToastCard from '../../card/toastCard';\r\nimport classes from './productView.module.css';\r\nimport loader from '../../image/sectionLoader.gif';\r\n\r\nfunction ProductView(props) {\r\n\r\n    //login authenticate\r\n    const loginSub = useSelector((state) => state.login.loggedin);\r\n    const userSub = useSelector((state) => state.login.userData);\r\n    let navigate = useNavigate();\r\n    \r\n    const {prdct, pid} = useParams();\r\n\r\n    const [com, pname] = prdct.split(\"-\");\r\n\r\n    const [size, setSize] = useState(\"0\");\r\n    const [showPara, setShowPara] = useState(false);\r\n    const [showToast, setShowToast] = useState(\"false\");\r\n\r\n    useEffect(() => {\r\n        document.title = 'Buy '+ com +' '+ pname;\r\n        window.scrollTo(0, 0);\r\n    });\r\n    \r\n    const [products, setProducts] = useState({});\r\n    \r\n    const dispatch = useDispatch();\r\n    \r\n    //fetch products data\r\n    function getData(){\r\n        fetch(`/api/products/${pid}`, {mode: 'cors'})\r\n        .then((response) => {\r\n            return response.json();\r\n        }).then((data) => {\r\n            setProducts(data);\r\n        });\r\n    }\r\n\r\n    useEffect(() =>{\r\n        getData();\r\n    }, []);\r\n\r\n    //post cart data mongodb\r\n    async function postData(email, cart, bill){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, cart, bill })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n    //post wish data mongodb\r\n    async function postWishData(email, wish){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, wish })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n    if(products.message){\r\n        navigate('/none', {required: true});\r\n        return(\r\n            <div className={classes.loading}>\r\n                 <img src = {loader} alt = \"Loading...\" className={classes.loaderImg}></img>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if(products !== {}){\r\n\r\n    function sizeHandler(event){\r\n        setSize(event.target.innerText);\r\n        return;\r\n    }\r\n\r\n    function addWish(event){\r\n\r\n        //authenticate\r\n        if(!loginSub){\r\n            navigate(`/login`);\r\n            return;\r\n        }\r\n\r\n        if(showToast !== \"false\")\r\n            return;\r\n\r\n        dispatch(wishActions.addItem({\r\n            id: products._id,\r\n            image: products.image,\r\n            company: products.company,\r\n            product: products.product,\r\n            rating: products.rating,\r\n            sp: products.sp,\r\n            mrp: products.mrp,\r\n            discount: products.discount,\r\n        }));\r\n\r\n        setShowToast(\"wishlist\");\r\n        setTimeout(function(){ setShowToast(\"false\"); }, 3000);\r\n\r\n        //store wish in mongodb\r\n        const email = userSub.email;\r\n        const wish = JSON.parse(localStorage.getItem(\"wishStore\"));\r\n\r\n        postWishData(email, wish);\r\n\r\n        return;\r\n    }\r\n\r\n    function addItem(event){\r\n        if(showToast !== \"false\")\r\n            return;\r\n        if(size === \"0\"){\r\n            setShowPara(true);\r\n            return;\r\n        }\r\n        setShowPara(false);\r\n\r\n        dispatch(cartActions.addItem({\r\n            id: products._id,\r\n            image: products.image,\r\n            company: products.company,\r\n            product: products.product,\r\n            rating: products.rating,\r\n            sp: products.sp,\r\n            mrp: products.mrp,\r\n            discount: products.discount,\r\n            quantity: 1,\r\n            sz: size,\r\n            delfee: 0,\r\n        }));//dispatching value to functions\r\n\r\n        setShowToast(\"bag\");\r\n        setTimeout(function(){ setShowToast(\"false\"); }, 3000);\r\n\r\n        //store cart in mongodb\r\n        const email = userSub.email;\r\n        const cart = JSON.parse(localStorage.getItem(\"products\"));\r\n        const bill = JSON.parse(localStorage.getItem(\"billStore\"));\r\n\r\n        postData(email, cart, bill);\r\n\r\n        return;\r\n    }\r\n    function remToast(rem){\r\n        setShowToast(\"false\");\r\n        return;\r\n    } \r\n\r\n    return(\r\n            <>\r\n            <div className={classes.view}>\r\n                {showToast !== \"false\" && <div className={classes.toast}> <ToastCard close = {remToast} value = {\"Item is added to \"+ showToast} /> </div>}\r\n\r\n                <div className={classes.image}><img src = {products.image} alt = \"Sneakers\"></img></div>\r\n\r\n                <div className={classes.details}>\r\n                    <p className={classes.company}>{products.company}</p>\r\n                    <p className={classes.product}>{products.product}</p>\r\n                    <p className={classes.rating}><StarRating stars={products.rating}/>{products.rating}</p>\r\n                    <p className={classes.price}>&#8377;{products.sp}&nbsp;&nbsp;\r\n                        \r\n                        <span className={classes.mrp}>&#8377;{products.mrp}</span>\r\n                        <span className={classes.discount}>&nbsp;&nbsp;({products.discount}% off)</span>\r\n                    \r\n                    </p>\r\n                    <p className={classes.tax}>Inclusive of all taxes</p>\r\n                    <p>SELECT SIZE (UK)</p>\r\n\r\n                    <ul className={classes.size}>\r\n                        <li><button className={size === \"6\" ? classes.sizeActive : ''} onClick={sizeHandler}>6</button></li>\r\n                        <li><button className={size === \"7\" ? classes.sizeActive : ''} onClick={sizeHandler}>7</button></li>\r\n                        <li><button className={size === \"8\" ? classes.sizeActive : ''} onClick={sizeHandler}>8</button></li>\r\n                        <li><button className={size === \"9\" ? classes.sizeActive : ''} onClick={sizeHandler}>9</button></li>\r\n                        <li><button className={size === \"10\" ? classes.sizeActive : ''} onClick={sizeHandler}>10</button></li>\r\n                    </ul>\r\n\r\n                    {showPara && <p className={classes.sizeWarning}>Please select a size</p>}\r\n                    \r\n                    <button className={classes.bag} onClick={addItem}>\r\n                        <span className={classes.cartIcon}><CartIcon /></span>\r\n                        &nbsp;&nbsp;&nbsp;\r\n                        ADD TO BAG\r\n                    </button>&nbsp;\r\n                    <button className={classes.wish} onClick={addWish}>\r\n                        <span className={classes.heartIcon}><HeartIcon /></span>\r\n                        &nbsp;&nbsp;&nbsp;\r\n                        WISHLIST\r\n                    </button>\r\n                \r\n                </div>\r\n                \r\n            </div>\r\n            \r\n            \r\n            {products.desc && <div className={classes.productDetails}>\r\n                <p className={classes.productDetailsHead}>PRODUCT DETAILS</p>\r\n                <p>{products.desc.details}</p>\r\n                <p className={classes.productDetailsHead}>Material & Care</p>\r\n                <p>{products.desc.material}</p>\r\n                <p className={classes.productDetailsHead}>Specifications</p>\r\n                <ul className={classes.specs}>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Type</p>\r\n                        <p>{products.desc.specsType}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Toe</p>\r\n                        <p>{products.desc.specsToe}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Pattern</p>\r\n                        <p>{products.desc.specsPattern}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Fastening</p>\r\n                        <p>{products.desc.specsFastening}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Shoe Width</p>\r\n                        <p>{products.desc.specsWidth}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Sole Material</p>\r\n                        <p>{products.desc.specsSole}</p>\r\n                    </li>\r\n                    <li>\r\n                        <p className={classes.productSpecsHead}>Warranty</p>\r\n                        <p>{products.desc.specsWarranty}</p>\r\n                    </li>\r\n                </ul>\r\n            </div>}\r\n            </>\r\n\r\n    );\r\n    }\r\n    return(\r\n        <div className={classes.loading}>\r\n             <img src = {loader} alt = \"Loading...\" className={classes.loaderImg}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductView;"]},"metadata":{},"sourceType":"module"}