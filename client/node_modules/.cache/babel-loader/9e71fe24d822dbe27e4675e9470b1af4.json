{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{loginActions}from'../../store/loginStore';import NotificationCard from'../../card/notificationCard';import preloader from'../../image/sectionLoader.gif';import classes from'./signIn.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(props){var navigate=useNavigate();var _useState=useState(\" \"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\" \"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({emailVerify:\"ok\",verifyCredentials:\"ok\"}),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrMsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loggedin=_useState8[0],setLoggedin=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loader=_useState10[0],setLoader=_useState10[1];useEffect(function(){document.title='Online Shopping site for shoes in India | Friction';window.scrollTo(0,0);});function emailHandler(event){setEmail(event.target.value);}function passwordHandler(event){setPassword(event.target.value);}var dispatch=useDispatch();function loginHandler(_x){return _loginHandler.apply(this,arguments);}function _loginHandler(){_loginHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var mailformat,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setLoader(true);mailformat=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;if(!(email.match(mailformat)===false)){_context.next=6;break;}setErrMsg(_objectSpread(_objectSpread({},errMsg),{},{emailVerify:\"ok\"}));return _context.abrupt(\"return\");case 6:setErrMsg(_objectSpread(_objectSpread({},errMsg),{},{emailVerify:\"ok\"}));_context.next=9;return fetch(\"/api/user/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 9:res=_context.sent;_context.next=12;return res.json();case 12:data=_context.sent;setLoader(false);if(!res.ok||!data){setErrMsg(_objectSpread(_objectSpread({},errMsg),{},{verifyCredentials:\"Incorrect Email or Password\"}));}else{dispatch(loginActions.login({_id:data._id,name:data.name,mobile:data.mobile,email:data.email,gender:data.gender,isAdmin:data.isAdmin,token:data.token}));setErrMsg(_objectSpread(_objectSpread({},errMsg),{},{verifyCredentials:\"ok\"}));setLoggedin(true);setTimeout(function(){setLoggedin(false);window.location.reload(true);},3000);setTimeout(function(){navigate(\"/\",{replace:true});},4000);}case 15:case\"end\":return _context.stop();}}},_callee);}));return _loginHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:classes.login,children:[/*#__PURE__*/_jsxs(\"form\",{method:\"POST\",className:classes.loginForm,onSubmit:loginHandler,children:[/*#__PURE__*/_jsxs(\"p\",{className:classes.head,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.headSpan,children:\"Login\"}),\" or \",/*#__PURE__*/_jsx(\"span\",{className:classes.headSpan,children:\"Signup\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.details,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\" \",required:true,className:classes.textBox,onBlur:emailHandler}),/*#__PURE__*/_jsx(\"label\",{className:classes.formLabel,children:\"Email*\"}),errMsg.emailVerify!==\"ok\"&&/*#__PURE__*/_jsx(\"p\",{className:classes.errmsg,children:errMsg.emailVerify})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.details,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\" \",maxlength:\"16\",required:true,className:classes.textBox,onBlur:passwordHandler}),/*#__PURE__*/_jsx(\"label\",{className:classes.formLabel,children:\"Password*\"})]}),errMsg.verifyCredentials!==\"ok\"&&/*#__PURE__*/_jsx(\"p\",{className:classes.errmsg,children:errMsg.verifyCredentials}),/*#__PURE__*/_jsx(\"p\",{className:classes.failLogIn,onClick:function onClick(){return navigate(\"/set-password\");},children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"Submit\",className:classes.contd,children:\"CONTINUE\"}),/*#__PURE__*/_jsxs(\"p\",{className:classes.agree,children:[\" By continuing, I agree to the \",/*#__PURE__*/_jsx(\"span\",{className:classes.bond,children:\"Terms of Use\"}),\" and\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:classes.bond,children:\"Privacy Policy\"})]}),/*#__PURE__*/_jsx(\"p\",{className:classes.failLogIn,onClick:function onClick(){return navigate(\"/register\");},children:\"New to Friction? Create an account\"})]}),loggedin&&/*#__PURE__*/_jsx(NotificationCard,{value:\"Logged in Successfully\"}),loader&&/*#__PURE__*/_jsx(\"img\",{src:preloader,className:classes.load,alt:\"Loading...\"})]});}export default SignIn;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/pages/signIn/signIn.js"],"names":["React","useState","useEffect","useNavigate","useDispatch","loginActions","NotificationCard","preloader","classes","SignIn","props","navigate","email","setEmail","password","setPassword","emailVerify","verifyCredentials","errMsg","setErrMsg","loggedin","setLoggedin","loader","setLoader","document","title","window","scrollTo","emailHandler","event","target","value","passwordHandler","dispatch","loginHandler","preventDefault","mailformat","match","fetch","method","headers","body","JSON","stringify","res","json","data","ok","login","_id","name","mobile","gender","isAdmin","token","setTimeout","location","reload","replace","loginForm","head","headSpan","details","textBox","formLabel","errmsg","failLogIn","contd","agree","bond","load"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginActions } from '../../store/loginStore';\r\n\r\nimport NotificationCard from '../../card/notificationCard';\r\nimport preloader from '../../image/sectionLoader.gif';\r\nimport classes from './signIn.module.css';\r\n\r\nfunction SignIn(props){\r\n    let navigate = useNavigate();\r\n\r\n    const [email, setEmail] = useState(\" \");\r\n    const [password, setPassword] = useState(\" \");\r\n    const [errMsg, setErrMsg] = useState({ emailVerify: \"ok\", verifyCredentials: \"ok\" });\r\n    const [loggedin, setLoggedin] = useState(false);\r\n    const [loader, setLoader] = useState(false);\r\n\r\n    useEffect(() => {\r\n        document.title = 'Online Shopping site for shoes in India | Friction';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    function emailHandler(event){\r\n        setEmail(event.target.value);    \r\n    }\r\n\r\n    function passwordHandler(event){\r\n        setPassword(event.target.value);    \r\n    }\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    async function loginHandler(event){\r\n        event.preventDefault();\r\n        setLoader(true);\r\n        const mailformat = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n        if(email.match(mailformat) === false){\r\n            setErrMsg({ ...errMsg, emailVerify: \"ok\"});\r\n            return;\r\n        }\r\n        setErrMsg({ ...errMsg, emailVerify: \"ok\"});\r\n\r\n        const res = await fetch(\"/api/user/login\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, password })\r\n        });\r\n\r\n        const data = await res.json();\r\n        setLoader(false);\r\n\r\n        if(!res.ok || !data){\r\n            setErrMsg({ ...errMsg, verifyCredentials: \"Incorrect Email or Password\"});\r\n        }\r\n        else{\r\n            \r\n            dispatch(loginActions.login({\r\n                _id: data._id,\r\n                name: data.name,\r\n                mobile: data.mobile,\r\n                email: data.email,\r\n                gender: data.gender,\r\n                isAdmin: data.isAdmin,\r\n                token: data.token\r\n            }));\r\n\r\n            setErrMsg({ ...errMsg, verifyCredentials: \"ok\"});\r\n            setLoggedin(true);\r\n            setTimeout(function(){ setLoggedin(false);\r\n                window.location.reload(true);}, 3000);\r\n            setTimeout(function(){ \r\n                navigate(`/`, { replace: true });\r\n            }, 4000);\r\n        }\r\n        \r\n    }\r\n\r\n    return(\r\n        <div className={classes.login}>\r\n            <form method='POST' className={classes.loginForm} onSubmit = {loginHandler}>\r\n                <p className={classes.head}><span  className={classes.headSpan}>Login</span> or <span  className={classes.headSpan}>Signup</span></p>\r\n                <div className={classes.details}>\r\n                    <input \r\n                        type= \"text\" \r\n                        placeholder=' ' \r\n                        required \r\n                        className={classes.textBox}\r\n                        onBlur = {emailHandler}>\r\n                    </input>\r\n                    <label className={classes.formLabel}>\r\n                       Email*\r\n                    </label>\r\n                    {errMsg.emailVerify !== \"ok\" && <p className={classes.errmsg}>{errMsg.emailVerify}</p>}\r\n                </div>\r\n                <div className={classes.details}>\r\n                    <input \r\n                        type= \"password\" \r\n                        placeholder=' ' \r\n                        maxlength=\"16\"\r\n                        required \r\n                        className={classes.textBox}\r\n                        onBlur = {passwordHandler}>\r\n                    </input>\r\n                    <label className={classes.formLabel}>\r\n                       Password*\r\n                    </label>\r\n                </div>\r\n\r\n                {errMsg.verifyCredentials !== \"ok\" && <p className={classes.errmsg}>{errMsg.verifyCredentials}</p>}\r\n                <p className={classes.failLogIn} onClick = {() => navigate(`/set-password`)}>Forgot Password?</p>\r\n                <button type = \"submit\" value=\"Submit\" className={classes.contd}>CONTINUE</button>\r\n                <p className={classes.agree}> By continuing, I agree to the <span className={classes.bond}>Terms of Use</span> and&nbsp;\r\n                <span className={classes.bond}>Privacy Policy</span></p>\r\n                <p className={classes.failLogIn} onClick = {() => navigate(`/register`)}>New to Friction? Create an account</p>\r\n            </form>\r\n            {loggedin && <NotificationCard value = {\"Logged in Successfully\"} />}\r\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}