{"ast":null,"code":"import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import ProductCard from'../../card/productCard';import preloader from'../../image/sectionLoader.gif';import rack from'../../image/shoe-rack.jpg';import Pagination from'../../pagination/pagination';import classes from'./search.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Search(props){var _useParams=useParams(),prdct=_useParams.prdct;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currPage=_useState4[0],setCurrPage=_useState4[1];var postPerPage=10;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];useEffect(function(){document.title='Buy '+prdct+' Online in India | Friction';window.scrollTo(0,0);});function getData(){setLoader(true);fetch(\"/api/products/category/\".concat(prdct),{mode:'cors'}).then(function(response){return response.json();}).then(function(data){setProducts(data);setLoader(false);});}useEffect(function(){getData();},[]);if(products&&products.length>0){var lastPostIndex=currPage*postPerPage;var firstPostIndex=lastPostIndex-postPerPage;var currProducts=products.slice(firstPostIndex,lastPostIndex);var productList=currProducts.map(function(shoe){return/*#__PURE__*/_jsx(ProductCard,{id:shoe._id,image:shoe.image,company:shoe.company,product:shoe.product,rating:shoe.rating,sp:shoe.sp,mrp:shoe.mrp,discount:shoe.discount},shoe._id);});return/*#__PURE__*/_jsxs(\"div\",{className:classes.layout,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.catalogue,children:[productList,loader&&/*#__PURE__*/_jsx(\"img\",{src:preloader,alt:\"Loading...\"})]}),/*#__PURE__*/_jsx(Pagination,{totalPost:products.length,postPerPage:postPerPage,setCurrPage:setCurrPage,currPage:currPage})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:classes.empty,children:[/*#__PURE__*/_jsx(\"img\",{src:rack,alt:\"Loading...\"}),/*#__PURE__*/_jsx(\"p\",{className:classes.head,children:\"We couldn't find any matches!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please check the spelling or try searching something else\"})]});}}export default Search;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/pages/search/search.js"],"names":["React","useState","useEffect","useParams","ProductCard","preloader","rack","Pagination","classes","Search","props","prdct","products","setProducts","currPage","setCurrPage","postPerPage","loader","setLoader","document","title","window","scrollTo","getData","fetch","mode","then","response","json","data","length","lastPostIndex","firstPostIndex","currProducts","slice","productList","map","shoe","_id","image","company","product","rating","sp","mrp","discount","layout","catalogue","empty","head"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport ProductCard from '../../card/productCard';\r\nimport preloader from '../../image/sectionLoader.gif';\r\nimport rack from '../../image/shoe-rack.jpg';\r\nimport Pagination from '../../pagination/pagination';\r\nimport classes from './search.module.css';\r\n\r\nfunction Search(props){\r\n    const {prdct} = useParams();\r\n\r\n    const [products, setProducts] = useState([]);\r\n    const [currPage, setCurrPage] = useState(1);\r\n    const postPerPage = 10;\r\n\r\n    const [loader, setLoader] = useState(false);\r\n\r\n    useEffect(() => {\r\n        document.title = 'Buy '+ prdct + ' Online in India | Friction';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    function getData(){\r\n        setLoader(true);\r\n        fetch(`/api/products/category/${prdct}`, {mode: 'cors'})\r\n        .then((response) => {\r\n            return response.json();\r\n        }).then((data) => {\r\n            setProducts(data);\r\n            setLoader(false);\r\n        });\r\n    }\r\n\r\n    useEffect(() =>{\r\n        getData();\r\n    }, []);\r\n\r\n    if(products && products.length > 0){\r\n\r\n        const lastPostIndex = currPage * postPerPage;\r\n        const firstPostIndex = lastPostIndex - postPerPage;\r\n\r\n        const currProducts = products.slice(firstPostIndex, lastPostIndex);\r\n\r\n        const productList = currProducts.map((shoe) => (\r\n            <ProductCard \r\n                key = {shoe._id} \r\n                id = {shoe._id}\r\n                image = {shoe.image}\r\n                company = {shoe.company} \r\n                product = {shoe.product} \r\n                rating = {shoe.rating} \r\n                sp = {shoe.sp} \r\n                mrp = {shoe.mrp} \r\n                discount = {shoe.discount}\r\n            />\r\n        ));\r\n        return(\r\n            <div className={classes.layout}>\r\n                <div className={classes.catalogue}>\r\n                    {productList}\r\n                    {loader && <img src = {preloader} alt = \"Loading...\"></img>}                    \r\n                </div>\r\n                <Pagination totalPost = {products.length} postPerPage = {postPerPage} setCurrPage = {setCurrPage} currPage = {currPage}/>\r\n            </div>\r\n        );\r\n    }\r\n    else{\r\n        \r\n        return(\r\n            <div className={classes.empty}>\r\n                <img src = {rack} alt = \"Loading...\"></img>\r\n                <p className={classes.head}>We couldn't find any matches!</p>\r\n                <p>Please check the spelling or try searching something else</p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}