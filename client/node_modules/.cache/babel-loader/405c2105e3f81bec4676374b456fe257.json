{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import TrashIcon from'../icons/trashIcon';import{useDispatch,useSelector}from'react-redux';import{cartActions}from'../store/cartStore';import classes from'./productItemCard.module.css';import AlertCard from'./alertCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItemCard(props){var dispatch=useDispatch();var userSub=useSelector(function(state){return state.login.userData;});//post cart data mongodb\nfunction postData(_x,_x2,_x3){return _postData.apply(this,arguments);}function _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,cart,bill){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,cart:cart,bill:bill})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:case\"end\":return _context.stop();}}},_callee);}));return _postData.apply(this,arguments);}var _useState=useState(false),_useState2=_slicedToArray(_useState,2),rem=_useState2[0],setRem=_useState2[1];function remHandler(event){if(rem===true)setRem(false);else setRem(true);return;}function remConfirm(con){if(rem===true)setRem(false);else setRem(true);if(con===1)remItem();return;}function remItem(event){dispatch(cartActions.removeItem({id:props.id,sz:props.size}));//store cart in mongodb\nvar email=userSub.email;var cart=JSON.parse(localStorage.getItem(\"products\"));var bill=JSON.parse(localStorage.getItem(\"billStore\"));postData(email,cart,bill);}function qtyHandler(event){dispatch(cartActions.open({id:props.id,topic:\"Quantity\",sz:props.size,value:props.quantity}));}function sizeHandler(event){dispatch(cartActions.open({id:props.id,topic:\"Size\",sz:props.size,value:props.size}));}return/*#__PURE__*/_jsxs(\"div\",{className:classes.card,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.image,children:/*#__PURE__*/_jsx(\"img\",{src:props.image,alt:\"Shoe\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.details,children:[/*#__PURE__*/_jsxs(\"ul\",{className:classes.header,children:[/*#__PURE__*/_jsx(\"li\",{className:classes.company,children:props.company}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"span\",{className:classes.close,onClick:remHandler,children:/*#__PURE__*/_jsx(TrashIcon,{})})})]}),/*#__PURE__*/_jsx(\"p\",{className:classes.product,children:props.product}),/*#__PURE__*/_jsx(\"p\",{children:props.rating}),/*#__PURE__*/_jsxs(\"p\",{className:classes.sizeQty,children:[/*#__PURE__*/_jsxs(\"span\",{onClick:sizeHandler,children:[\"Size: \",props.size]}),\"\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"span\",{onClick:qtyHandler,children:[\"Qty: \",props.quantity]})]}),/*#__PURE__*/_jsxs(\"p\",{className:classes.price,children:[\"\\u20B9\",props.sp,\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:classes.mrp,children:[\"\\u20B9\",props.mrp]}),/*#__PURE__*/_jsxs(\"span\",{className:classes.discount,children:[\"\\xA0\\xA0(\",props.discount,\"% off)\"]})]})]}),rem&&/*#__PURE__*/_jsx(\"div\",{className:classes.backdrop}),rem&&/*#__PURE__*/_jsx(\"div\",{className:classes.alert,children:/*#__PURE__*/_jsx(AlertCard,{value:1,confirm:remConfirm})})]});}export default ProductItemCard;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/card/productItemCard.js"],"names":["React","useState","TrashIcon","useDispatch","useSelector","cartActions","classes","AlertCard","ProductItemCard","props","dispatch","userSub","state","login","userData","postData","email","cart","bill","fetch","method","headers","body","JSON","stringify","res","json","rem","setRem","remHandler","event","remConfirm","con","remItem","removeItem","id","sz","size","parse","localStorage","getItem","qtyHandler","open","topic","value","quantity","sizeHandler","card","image","details","header","company","close","product","rating","sizeQty","price","sp","mrp","discount","backdrop","alert"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport TrashIcon from '../icons/trashIcon';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { cartActions } from '../store/cartStore';\r\n\r\nimport classes from './productItemCard.module.css';\r\nimport AlertCard from './alertCard';\r\n\r\nfunction ProductItemCard(props){\r\n    const dispatch = useDispatch();\r\n    const userSub = useSelector((state) => state.login.userData);\r\n\r\n    //post cart data mongodb\r\n    async function postData(email, cart, bill){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, cart, bill })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n    const [rem, setRem] = useState(false);\r\n    function remHandler(event){\r\n        if(rem === true)\r\n            setRem(false);\r\n        else\r\n            setRem(true);\r\n        return;\r\n    }\r\n    function remConfirm(con){\r\n        if(rem === true)\r\n            setRem(false);\r\n        else\r\n            setRem(true);\r\n        if(con === 1)\r\n            remItem();\r\n        return;\r\n    }\r\n\r\n    function remItem(event){\r\n        dispatch(cartActions.removeItem({\r\n            id: props.id,\r\n            sz: props.size,\r\n        }));\r\n\r\n        //store cart in mongodb\r\n        const email = userSub.email;\r\n        const cart = JSON.parse(localStorage.getItem(\"products\"));\r\n        const bill = JSON.parse(localStorage.getItem(\"billStore\"));\r\n\r\n        postData(email, cart, bill);\r\n    }\r\n    function qtyHandler(event){\r\n        dispatch(cartActions.open({\r\n            id: props.id,\r\n            topic: \"Quantity\",\r\n            sz: props.size,\r\n            value: props.quantity,\r\n        }));\r\n    }\r\n    function sizeHandler(event){\r\n        dispatch(cartActions.open({\r\n            id: props.id,\r\n            topic: \"Size\",\r\n            sz: props.size,\r\n            value: props.size,\r\n        }));\r\n    }\r\n\r\n    return (\r\n        <div className={classes.card}>\r\n            <div className={classes.image}><img src = {props.image} alt = \"Shoe\"></img></div>\r\n\r\n            <div className={classes.details}>\r\n\r\n                <ul className={classes.header}>\r\n\r\n                    <li className={classes.company}>{props.company}</li>\r\n                    <li><span className={classes.close} onClick={remHandler}><TrashIcon /></span></li>\r\n\r\n                </ul>\r\n\r\n                <p className={classes.product}>{props.product}</p>\r\n                <p>{props.rating}</p>\r\n                <p className={classes.sizeQty}><span onClick={sizeHandler}>Size: {props.size}</span>&nbsp;&nbsp;&nbsp;<span onClick={qtyHandler}>Qty: {props.quantity}</span></p>\r\n                <p className={classes.price}>&#8377;{props.sp}&nbsp;&nbsp;\r\n                    \r\n                    <span className={classes.mrp}>&#8377;{props.mrp}</span>\r\n                    <span className={classes.discount}>&nbsp;&nbsp;({props.discount}% off)</span>\r\n                \r\n                </p>\r\n\r\n            </div>\r\n\r\n            {rem && <div className= {classes.backdrop}/>}\r\n            {rem && <div className={classes.alert}><AlertCard value = {1} confirm = {remConfirm} /></div>}\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductItemCard;"]},"metadata":{},"sourceType":"module"}