{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import classes from'./catalogue.module.css';import ProductCard from'../card/productCard';import axios from'axios';import preloader from'../image/sectionLoader.gif';import Pagination from'../pagination/pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Catalogue(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currPage=_useState4[0],setCurrPage=_useState4[1];var postPerPage=20;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoader(true);_context.next=3;return axios.get('/api/products');case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProducts(data.products);setLoader(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[]);if(products&&products.length>0){var lastPostIndex=currPage*postPerPage;var firstPostIndex=lastPostIndex-postPerPage;var currProducts=products.slice(firstPostIndex,lastPostIndex);var productList=currProducts.map(function(shoe){return/*#__PURE__*/_jsx(ProductCard,{id:shoe._id,image:shoe.image,company:shoe.company,product:shoe.product,rating:shoe.rating,sp:shoe.sp,mrp:shoe.mrp,discount:shoe.discount},shoe._id);});return/*#__PURE__*/_jsxs(\"div\",{className:classes.layout,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.features,children:[productList,loader&&/*#__PURE__*/_jsx(\"img\",{src:preloader,alt:\"Loading...\"})]}),/*#__PURE__*/_jsx(Pagination,{totalPost:products.length,postPerPage:postPerPage,setCurrPage:setCurrPage,currPage:currPage})]});}return/*#__PURE__*/_jsx(\"div\",{className:classes.layout,children:/*#__PURE__*/_jsx(\"img\",{src:preloader,alt:\"Loading...\"})});}export default Catalogue;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/catalogue/catalogue.js"],"names":["React","useState","useEffect","classes","ProductCard","axios","preloader","Pagination","Catalogue","props","products","setProducts","currPage","setCurrPage","postPerPage","loader","setLoader","getData","get","data","length","lastPostIndex","firstPostIndex","currProducts","slice","productList","map","shoe","_id","image","company","product","rating","sp","mrp","discount","layout","features"],"mappings":"4VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,4BAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,wFAEA,QAASC,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CAEtB,cAAgCR,QAAQ,CAAC,EAAD,CAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAgCV,QAAQ,CAAC,CAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CAEA,eAA4Bb,QAAQ,CAAC,KAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eAGAd,SAAS,CAAC,UAAM,SACGe,CAAAA,OADH,+HACZ,6JACED,SAAS,CAAC,IAAD,CAAT,CADF,sBAEuBX,CAAAA,KAAK,CAACa,GAAN,CAAU,eAAV,CAFvB,uCAESC,IAFT,kBAESA,IAFT,CAGER,WAAW,CAACQ,IAAI,CAACT,QAAN,CAAX,CACAM,SAAS,CAAC,KAAD,CAAT,CAJF,sDADY,0CAOZC,OAAO,GACV,CARQ,CAQN,EARM,CAAT,CAUA,GAAGP,QAAQ,EAAIA,QAAQ,CAACU,MAAT,CAAkB,CAAjC,CAAmC,CAE/B,GAAMC,CAAAA,aAAa,CAAGT,QAAQ,CAAGE,WAAjC,CACA,GAAMQ,CAAAA,cAAc,CAAGD,aAAa,CAAGP,WAAvC,CAEA,GAAMS,CAAAA,YAAY,CAAGb,QAAQ,CAACc,KAAT,CAAeF,cAAf,CAA+BD,aAA/B,CAArB,CAGA,GAAMI,CAAAA,WAAW,CAAGF,YAAY,CAACG,GAAb,CAAiB,SAACC,IAAD,qBACjC,KAAC,WAAD,EAEI,EAAE,CAAIA,IAAI,CAACC,GAFf,CAGI,KAAK,CAAID,IAAI,CAACE,KAHlB,CAII,OAAO,CAAIF,IAAI,CAACG,OAJpB,CAKI,OAAO,CAAIH,IAAI,CAACI,OALpB,CAMI,MAAM,CAAIJ,IAAI,CAACK,MANnB,CAOI,EAAE,CAAIL,IAAI,CAACM,EAPf,CAQI,GAAG,CAAIN,IAAI,CAACO,GARhB,CASI,QAAQ,CAAIP,IAAI,CAACQ,QATrB,EACWR,IAAI,CAACC,GADhB,CADiC,EAAjB,CAApB,CAaA,mBACI,aAAK,SAAS,CAAEzB,OAAO,CAACiC,MAAxB,wBACI,aAAK,SAAS,CAAEjC,OAAO,CAACkC,QAAxB,WACKZ,WADL,CAEKV,MAAM,eAAI,YAAK,GAAG,CAAIT,SAAZ,CAAuB,GAAG,CAAG,YAA7B,EAFf,GADJ,cAKI,KAAC,UAAD,EAAY,SAAS,CAAII,QAAQ,CAACU,MAAlC,CAA0C,WAAW,CAAIN,WAAzD,CAAsE,WAAW,CAAID,WAArF,CAAkG,QAAQ,CAAID,QAA9G,EALJ,GADJ,CASH,CACD,mBACI,YAAK,SAAS,CAAET,OAAO,CAACiC,MAAxB,uBACI,YAAK,GAAG,CAAI9B,SAAZ,CAAuB,GAAG,CAAG,YAA7B,EADJ,EADJ,CAMH,CAED,cAAeE,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport classes from './catalogue.module.css';\r\nimport ProductCard from '../card/productCard';\r\nimport axios from 'axios';\r\nimport preloader from '../image/sectionLoader.gif';\r\nimport Pagination from '../pagination/pagination';\r\n\r\nfunction Catalogue(props) {\r\n\r\n    const [products, setProducts] = useState([]);\r\n    const [currPage, setCurrPage] = useState(1);\r\n    const postPerPage = 20;\r\n\r\n    const [loader, setLoader] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        async function getData() {\r\n          setLoader(true);  \r\n          const {data} = await axios.get('/api/products');\r\n          setProducts(data.products);\r\n          setLoader(false);\r\n        }\r\n        getData();\r\n    }, []);\r\n\r\n    if(products && products.length > 0){\r\n\r\n        const lastPostIndex = currPage * postPerPage;\r\n        const firstPostIndex = lastPostIndex - postPerPage;\r\n\r\n        const currProducts = products.slice(firstPostIndex, lastPostIndex);\r\n\r\n\r\n        const productList = currProducts.map((shoe) => (\r\n            <ProductCard \r\n                key = {shoe._id} \r\n                id = {shoe._id}\r\n                image = {shoe.image}\r\n                company = {shoe.company} \r\n                product = {shoe.product} \r\n                rating = {shoe.rating} \r\n                sp = {shoe.sp} \r\n                mrp = {shoe.mrp} \r\n                discount = {shoe.discount}\r\n            />\r\n        ));\r\n        return(\r\n            <div className={classes.layout}>\r\n                <div className={classes.features}>\r\n                    {productList}\r\n                    {loader && <img src = {preloader} alt = \"Loading...\"></img>}\r\n                </div>\r\n                <Pagination totalPost = {products.length} postPerPage = {postPerPage} setCurrPage = {setCurrPage} currPage = {currPage}/>\r\n            </div>\r\n        );\r\n    }\r\n    return(\r\n        <div className={classes.layout}>\r\n            <img src = {preloader} alt = \"Loading...\"></img>\r\n        </div>\r\n    );\r\n    \r\n}\r\n\r\nexport default Catalogue;"]},"metadata":{},"sourceType":"module"}