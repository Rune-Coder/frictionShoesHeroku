{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { loginActions } from '../store/loginStore';\n\nfunction UserData(props) {\n  _s();\n\n  const [user, setUser] = useState({});\n\n  async function getData(token) {\n    const res = await fetch(`/api/user/profile`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await res.json();\n    console.log(props.token);\n    if (res.ok) setUser(data);\n  }\n\n  useEffect(() => {\n    getData(props.token);\n  }, [props.token]);\n  var loggedin = true;\n  const dispatch = useDispatch();\n\n  if (Object.keys(user).length === 0) {\n    props.token = \"\";\n    loggedin = false;\n  }\n\n  dispatch(loginActions.loginVerify({\n    token: props.token,\n    userData: user,\n    loggedin: loggedin\n  }));\n}\n\n_s(UserData, \"WdC3RzhmyDx4cTUaAJydeC+vK6I=\", false, function () {\n  return [useDispatch];\n});\n\n_c = UserData;\nexport { UserData };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserData\");","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/connect/userData.js"],"names":["useState","useEffect","useDispatch","loginActions","UserData","props","user","setUser","getData","token","res","fetch","method","headers","Authorization","data","json","console","log","ok","loggedin","dispatch","Object","keys","length","loginVerify","userData"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,YAAT,QAA6B,qBAA7B;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAwB;AAAA;;AACpB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,EAAD,CAAhC;;AAEA,iBAAeQ,OAAf,CAAuBC,KAAvB,EAA6B;AACzB,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,mBAAF,EAAsB;AACzCC,MAAAA,MAAM,EAAE,KADiC;AAEzCC,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAG,UAASL,KAAM;AAD3B;AAFiC,KAAtB,CAAvB;AAOA,UAAMM,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYb,KAAK,CAACI,KAAlB;AACA,QAAGC,GAAG,CAACS,EAAP,EACIZ,OAAO,CAACQ,IAAD,CAAP;AACP;;AAEDd,EAAAA,SAAS,CAAC,MAAK;AACXO,IAAAA,OAAO,CAACH,KAAK,CAACI,KAAP,CAAP;AACH,GAFQ,EAEN,CAACJ,KAAK,CAACI,KAAP,CAFM,CAAT;AAIA,MAAIW,QAAQ,GAAG,IAAf;AACA,QAAMC,QAAQ,GAAGnB,WAAW,EAA5B;;AAEA,MAAGoB,MAAM,CAACC,IAAP,CAAYjB,IAAZ,EAAkBkB,MAAlB,KAA6B,CAAhC,EAAkC;AAC9BnB,IAAAA,KAAK,CAACI,KAAN,GAAc,EAAd;AACAW,IAAAA,QAAQ,GAAG,KAAX;AACH;;AAEDC,EAAAA,QAAQ,CAAClB,YAAY,CAACsB,WAAb,CAAyB;AAC9BhB,IAAAA,KAAK,EAAEJ,KAAK,CAACI,KADiB;AAE9BiB,IAAAA,QAAQ,EAAEpB,IAFoB;AAG9Bc,IAAAA,QAAQ,EAAEA;AAHoB,GAAzB,CAAD,CAAR;AAMH;;GAnCQhB,Q;UAsBYF,W;;;KAtBZE,Q;AAqCT,SAASA,QAAT","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginActions } from '../store/loginStore';\r\n\r\nfunction UserData(props){\r\n    const [user, setUser] = useState({});\r\n\r\n    async function getData(token){\r\n        const res = await fetch(`/api/user/profile`, {\r\n            method: \"GET\",\r\n            headers:{\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        });\r\n    \r\n        const data = await res.json();\r\n        console.log(props.token);\r\n        if(res.ok)\r\n            setUser(data);\r\n    }\r\n\r\n    useEffect(() =>{\r\n        getData(props.token);\r\n    }, [props.token]);\r\n\r\n    var loggedin = true;\r\n    const dispatch = useDispatch();\r\n    \r\n    if(Object.keys(user).length === 0){\r\n        props.token = \"\";\r\n        loggedin = false;\r\n    }\r\n\r\n    dispatch(loginActions.loginVerify({\r\n        token: props.token,\r\n        userData: user,\r\n        loggedin: loggedin\r\n    }));\r\n    \r\n}\r\n\r\nexport { UserData };"]},"metadata":{},"sourceType":"module"}