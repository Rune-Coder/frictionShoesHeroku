{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import OrdersEmpty from'./ordersEmpty';import classes from'./orders.module.css';import OrdersCard from'../../card/ordersCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Orders(props){var userSub=useSelector(function(state){return state.login.userData;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];useEffect(function(){document.title='Online Shopping site for Shoes in India | Friction';window.scrollTo(0,0);});useEffect(function(){//get orders data mongodb\nfunction getOrders(_x){return _getOrders.apply(this,arguments);}function _getOrders(){_getOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok&&data.orders)setOrders(data.orders);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getOrders.apply(this,arguments);}getOrders(userSub.email);},[userSub.email]);orders.reverse();var orderList=orders.map(function(order){return/*#__PURE__*/_jsx(OrdersCard,{id:order.order_id,status:order.status,bill:order.bill,products:order.products,payment:order.payment,address:order.address,date:order.date},order.order_id);});return/*#__PURE__*/_jsxs(\"div\",{className:classes.orders,children:[orders.length===0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OrdersEmpty,{})}),orders.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:classes.ordersCard,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.head,children:\"Your Orders\"}),orderList]})]});}export default Orders;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/pages/orders/orders.js"],"names":["React","useState","useEffect","useSelector","OrdersEmpty","classes","OrdersCard","Orders","props","userSub","state","login","userData","orders","setOrders","document","title","window","scrollTo","getOrders","email","fetch","method","headers","body","JSON","stringify","res","json","data","ok","reverse","orderList","map","order","order_id","status","bill","products","payment","address","date","length","ordersCard","head"],"mappings":"4VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,OAASC,WAAT,KAA4B,aAA5B,CAEA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,C,wFAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAsB,CAClB,GAAMC,CAAAA,OAAO,CAAGN,WAAW,CAAC,SAACO,KAAD,QAAWA,CAAAA,KAAK,CAACC,KAAN,CAAYC,QAAvB,EAAD,CAA3B,CAEA,cAA4BX,QAAQ,CAAC,EAAD,CAApC,wCAAOY,MAAP,eAAeC,SAAf,eAEAZ,SAAS,CAAC,UAAM,CACZa,QAAQ,CAACC,KAAT,CAAiB,oDAAjB,CACAC,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACH,CAHQ,CAAT,CAKAhB,SAAS,CAAC,UAAK,CAEX;AAFW,QAGIiB,CAAAA,SAHJ,uIAGX,iBAAyBC,KAAzB,qJAEsBC,CAAAA,KAAK,CAAC,uBAAD,CAA0B,CAC7CC,MAAM,CAAE,MADqC,CAE7CC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CAFqC,CAK7CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAAf,CALuC,CAA1B,CAF3B,QAEUO,GAFV,qCAUuBA,CAAAA,GAAG,CAACC,IAAJ,EAVvB,QAUUC,IAVV,eAYI,GAAGF,GAAG,CAACG,EAAJ,EAAUD,IAAI,CAAChB,MAAlB,CACIC,SAAS,CAACe,IAAI,CAAChB,MAAN,CAAT,CAbR,sDAHW,4CAmBXM,SAAS,CAACV,OAAO,CAACW,KAAT,CAAT,CAEH,CArBQ,CAqBN,CAACX,OAAO,CAACW,KAAT,CArBM,CAAT,CAuBAP,MAAM,CAACkB,OAAP,GACA,GAAMC,CAAAA,SAAS,CAAGnB,MAAM,CAACoB,GAAP,CAAW,SAACC,KAAD,qBACzB,KAAC,UAAD,EAEI,EAAE,CAAIA,KAAK,CAACC,QAFhB,CAGI,MAAM,CAAID,KAAK,CAACE,MAHpB,CAII,IAAI,CAAIF,KAAK,CAACG,IAJlB,CAKI,QAAQ,CAAIH,KAAK,CAACI,QALtB,CAMI,OAAO,CAAIJ,KAAK,CAACK,OANrB,CAOI,OAAO,CAAIL,KAAK,CAACM,OAPrB,CAQI,IAAI,CAAIN,KAAK,CAACO,IARlB,EACWP,KAAK,CAACC,QADjB,CADyB,EAAX,CAAlB,CAaA,mBACI,aAAK,SAAS,CAAE9B,OAAO,CAACQ,MAAxB,WACKA,MAAM,CAAC6B,MAAP,GAAkB,CAAlB,eAAuB,kCAAK,KAAC,WAAD,IAAL,EAD5B,CAGK7B,MAAM,CAAC6B,MAAP,CAAgB,CAAhB,eAAqB,aAAK,SAAS,CAAErC,OAAO,CAACsC,UAAxB,wBAClB,UAAG,SAAS,CAAEtC,OAAO,CAACuC,IAAtB,yBADkB,CAEjBZ,SAFiB,GAH1B,GADJ,CAUH,CAED,cAAezB,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport OrdersEmpty from './ordersEmpty';\r\nimport classes from './orders.module.css';\r\nimport OrdersCard from '../../card/ordersCard';\r\n\r\nfunction Orders(props){\r\n    const userSub = useSelector((state) => state.login.userData);\r\n\r\n    const [orders, setOrders] = useState([]);\r\n\r\n    useEffect(() => {\r\n        document.title = 'Online Shopping site for Shoes in India | Friction';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    useEffect(() =>{\r\n\r\n        //get orders data mongodb\r\n        async function getOrders(email){\r\n\r\n            const res = await fetch(\"/api/user/history-get\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ email })\r\n            });\r\n        \r\n            const data = await res.json();\r\n                \r\n            if(res.ok && data.orders)\r\n                setOrders(data.orders);\r\n\r\n        }\r\n        getOrders(userSub.email);\r\n\r\n    }, [userSub.email]);\r\n\r\n    orders.reverse();\r\n    const orderList = orders.map((order) => (\r\n        <OrdersCard \r\n            key = {order.order_id} \r\n            id = {order.order_id}\r\n            status = {order.status}\r\n            bill = {order.bill} \r\n            products = {order.products} \r\n            payment = {order.payment} \r\n            address = {order.address} \r\n            date = {order.date} \r\n        />\r\n    ));\r\n\r\n    return(\r\n        <div className={classes.orders}>\r\n            {orders.length === 0 && <div><OrdersEmpty /></div>}\r\n\r\n            {orders.length > 0 && <div className={classes.ordersCard}>\r\n                <p className={classes.head}>Your Orders</p>\r\n                {orderList}\r\n            </div>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Orders;"]},"metadata":{},"sourceType":"module"}