{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { loginActions } from '../store/loginStore';\n\nfunction UserData(val) {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [token, setToken] = useState(val);\n  useEffect(() => {\n    async function getData() {\n      console.log(token);\n      const res = await fetch(`/api/user/profile`, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      if (res.ok) setUser(data);\n    }\n\n    getData();\n  }, [token]);\n  var loggedin = true;\n  const dispatch = useDispatch();\n\n  if (Object.keys(user).length === 0) {\n    setToken(\"\");\n    loggedin = false;\n  }\n\n  dispatch(loginActions.loginVerify({\n    token: token,\n    userData: user,\n    loggedin: loggedin\n  }));\n}\n\n_s(UserData, \"wyBObCA9eINVmf/6wwq+u0M7/FE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = UserData;\nexport { UserData };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserData\");","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/connect/userData.js"],"names":["useState","useEffect","useDispatch","loginActions","UserData","val","user","setUser","token","setToken","getData","console","log","res","fetch","method","headers","Authorization","data","json","ok","loggedin","dispatch","Object","keys","length","loginVerify","userData"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,YAAT,QAA6B,qBAA7B;;AAEA,SAASC,QAAT,CAAkBC,GAAlB,EAAsB;AAAA;;AAClB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAACK,GAAD,CAAlC;AAGAJ,EAAAA,SAAS,CAAC,MAAK;AAEX,mBAAeS,OAAf,GAAwB;AAEpBC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AAEA,YAAMK,GAAG,GAAG,MAAMC,KAAK,CAAE,mBAAF,EAAsB;AACzCC,QAAAA,MAAM,EAAE,KADiC;AAEzCC,QAAAA,OAAO,EAAC;AACJC,UAAAA,aAAa,EAAG,UAAST,KAAM;AAD3B;AAFiC,OAAtB,CAAvB;AAOA,YAAMU,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAnB;AAEA,UAAGN,GAAG,CAACO,EAAP,EACIb,OAAO,CAACW,IAAD,CAAP;AAEP;;AAEDR,IAAAA,OAAO;AAEV,GAtBQ,EAsBN,CAACF,KAAD,CAtBM,CAAT;AAwBA,MAAIa,QAAQ,GAAG,IAAf;AACA,QAAMC,QAAQ,GAAGpB,WAAW,EAA5B;;AAEA,MAAGqB,MAAM,CAACC,IAAP,CAAYlB,IAAZ,EAAkBmB,MAAlB,KAA6B,CAAhC,EAAkC;AAC9BhB,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAY,IAAAA,QAAQ,GAAG,KAAX;AACH;;AAIDC,EAAAA,QAAQ,CAACnB,YAAY,CAACuB,WAAb,CAAyB;AAC9BlB,IAAAA,KAAK,EAAEA,KADuB;AAE9BmB,IAAAA,QAAQ,EAAErB,IAFoB;AAG9Be,IAAAA,QAAQ,EAAEA;AAHoB,GAAzB,CAAD,CAAR;AAMH;;GA7CQjB,Q;UA8BYF,W;;;KA9BZE,Q;AA+CT,SAASA,QAAT","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginActions } from '../store/loginStore';\r\n\r\nfunction UserData(val){\r\n    const [user, setUser] = useState({});\r\n    const [token, setToken] = useState(val);\r\n    \r\n\r\n    useEffect(() =>{\r\n\r\n        async function getData(){\r\n\r\n            console.log(token);\r\n    \r\n            const res = await fetch(`/api/user/profile`, {\r\n                method: \"GET\",\r\n                headers:{\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n        \r\n            const data = await res.json();\r\n            \r\n            if(res.ok)\r\n                setUser(data);\r\n    \r\n        }\r\n\r\n        getData();\r\n\r\n    }, [token]);\r\n\r\n    var loggedin = true;\r\n    const dispatch = useDispatch();\r\n    \r\n    if(Object.keys(user).length === 0){\r\n        setToken(\"\");\r\n        loggedin = false;\r\n    }\r\n\r\n    \r\n\r\n    dispatch(loginActions.loginVerify({\r\n        token: token,\r\n        userData: user,\r\n        loggedin: loggedin\r\n    }));\r\n    \r\n}\r\n\r\nexport { UserData };"]},"metadata":{},"sourceType":"module"}