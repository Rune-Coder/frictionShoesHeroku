{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{wishActions}from'../store/wishStore';import StarRating from'./starRating';import HeartIcon from'../icons/heartIcon';import classes from'./productCard.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCard(props){var loginSub=useSelector(function(state){return state.login.loggedin;});var userSub=useSelector(function(state){return state.login.userData;});var navigate=useNavigate();function routeChange(){var path=\"/shoes/\"+props.company.toLowerCase()+'-'+props.product.toLowerCase()+'/'+props.id;navigate(path);}var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addWish=_useState2[0],setAddWish=_useState2[1];useEffect(function(){var wish=localStorage.getItem(\"wishStore\")?JSON.parse(localStorage.getItem(\"wishStore\")):[];if(wish.length>0){var existItem=wish.find(function(item){return item.id===props.id;});if(existItem)setAddWish(true);}},[props]);var dispatch=useDispatch();//post wish data mongodb\nfunction postWishData(_x,_x2){return _postWishData.apply(this,arguments);}function _postWishData(){_postWishData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,wish){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,wish:wish})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:case\"end\":return _context.stop();}}},_callee);}));return _postWishData.apply(this,arguments);}function wishHandler(event){event.stopPropagation();//authenticate\nif(!loginSub){navigate(\"/login\");return;}if(addWish)setAddWish(false);else setAddWish(true);dispatch(wishActions.addItem({id:props.id,image:props.image,company:props.company,product:props.product,rating:props.rating,sp:props.sp,mrp:props.mrp,discount:props.discount}));//store wish in mongodb\nvar email=userSub.email;var wish=JSON.parse(localStorage.getItem(\"wishStore\"));postWishData(email,wish);return;}return/*#__PURE__*/_jsxs(\"div\",{className:classes.card,onClick:routeChange,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.image,children:/*#__PURE__*/_jsx(\"img\",{src:props.image,alt:\"Shoe\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.desc,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.comName,children:props.company}),/*#__PURE__*/_jsx(\"p\",{className:classes.pName,children:props.product}),/*#__PURE__*/_jsxs(\"p\",{className:classes.rating,children:[/*#__PURE__*/_jsx(StarRating,{stars:props.rating}),props.rating]}),/*#__PURE__*/_jsxs(\"ul\",{className:classes.priceCart,children:[/*#__PURE__*/_jsxs(\"li\",{className:classes.price,children:[\"\\u20B9\",props.sp,\" \",/*#__PURE__*/_jsxs(\"span\",{className:classes.mrp,children:[\"\\u20B9\",props.mrp]}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:classes.discount,children:[\"(\",props.discount,\"% off)\"]})]}),/*#__PURE__*/_jsx(\"li\",{onClick:wishHandler,children:/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(classes.wishList,\" \").concat(addWish&&classes.activeWish,\" \").concat(!addWish&&''),children:/*#__PURE__*/_jsx(HeartIcon,{})})})]})]})]});}export default ProductCard;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/card/productCard.js"],"names":["React","useState","useEffect","useNavigate","useDispatch","useSelector","wishActions","StarRating","HeartIcon","classes","ProductCard","props","loginSub","state","login","loggedin","userSub","userData","navigate","routeChange","path","company","toLowerCase","product","id","addWish","setAddWish","wish","localStorage","getItem","JSON","parse","length","existItem","find","item","dispatch","postWishData","email","fetch","method","headers","body","stringify","res","json","wishHandler","event","stopPropagation","addItem","image","rating","sp","mrp","discount","card","desc","comName","pName","priceCart","price","wishList","activeWish"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { wishActions } from '../store/wishStore';\r\n\r\nimport StarRating from './starRating';\r\nimport HeartIcon from '../icons/heartIcon';\r\nimport classes from './productCard.module.css';\r\n\r\nfunction ProductCard(props) {\r\n    const loginSub = useSelector((state) => state.login.loggedin);\r\n    const userSub = useSelector((state) => state.login.userData);\r\n    let navigate = useNavigate();\r\n\r\n    function routeChange(){ \r\n        let path = `/shoes/`+props.company.toLowerCase()+'-'+props.product.toLowerCase()+'/'+props.id; \r\n        navigate(path);\r\n    }\r\n\r\n    const [addWish, setAddWish] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        const wish = localStorage.getItem(\"wishStore\") ? JSON.parse(localStorage.getItem(\"wishStore\")) : [];\r\n        if(wish.length > 0){\r\n            const existItem = wish.find(item => item.id === props.id);\r\n            if(existItem)\r\n                setAddWish(true);\r\n        }\r\n        \r\n    }, [props]);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    //post wish data mongodb\r\n    async function postWishData(email, wish){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, wish })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n    function wishHandler(event){\r\n        event.stopPropagation();\r\n\r\n        //authenticate\r\n        if(!loginSub){\r\n            navigate(`/login`);\r\n            return;\r\n        }\r\n\r\n        if(addWish)\r\n            setAddWish(false);\r\n        else\r\n            setAddWish(true);\r\n\r\n        dispatch(wishActions.addItem({\r\n            id: props.id,\r\n            image: props.image,\r\n            company: props.company,\r\n            product: props.product,\r\n            rating: props.rating,\r\n            sp: props.sp,\r\n            mrp: props.mrp,\r\n            discount: props.discount,\r\n        }));\r\n\r\n        //store wish in mongodb\r\n        const email = userSub.email;\r\n        const wish = JSON.parse(localStorage.getItem(\"wishStore\"));\r\n\r\n        postWishData(email, wish);\r\n\r\n        return; \r\n    }\r\n    return(\r\n        <div className={classes.card} onClick = {routeChange}>\r\n           <div className={classes.image}>\r\n                <img src = {props.image} alt = \"Shoe\"></img>\r\n           </div>\r\n           <div className={classes.desc}>\r\n                <span  className={classes.comName}>{props.company}</span>\r\n                <p className={classes.pName}>{props.product}</p>\r\n                <p className={classes.rating}>\r\n                    <StarRating stars={props.rating}/>{props.rating}\r\n                </p>\r\n                <ul className={classes.priceCart}>\r\n                    <li className={classes.price}>&#8377;{props.sp} <span className={classes.mrp}>\r\n                        &#8377;{props.mrp}</span> <span className={classes.discount}>({props.discount}% off)</span>\r\n                    </li>\r\n                    <li onClick={wishHandler}><span className = {`${classes.wishList} ${addWish && classes.activeWish} ${!addWish && ''}`}><HeartIcon /></span></li>\r\n                </ul>\r\n           </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductCard;"]},"metadata":{},"sourceType":"module"}