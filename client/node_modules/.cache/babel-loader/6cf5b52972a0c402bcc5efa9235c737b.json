{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{GetCookie}from'../../hooks/cookies';import NotificationCard from'../../card/notificationCard';import preloader from'../../image/sectionLoader.gif';import classes from'./profileEdit.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileEdit(props){var _useState=useState(\" \"),_useState2=_slicedToArray(_useState,2),useName=_useState2[0],setUseName=_useState2[1];var _useState3=useState(\" \"),_useState4=_slicedToArray(_useState3,2),useGen=_useState4[0],setUseGen=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updated=_useState8[0],setUpdated=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loader=_useState10[0],setLoader=_useState10[1];var navigate=useNavigate();var token=GetCookie(\"token\");useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/profile\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok)setUser(data);else navigate(\"/login\",{replace:true});case 7:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[token]);function profileHandler(_x){return _profileHandler.apply(this,arguments);}function _profileHandler(){_profileHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var email,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(useName.trim()===\"\"||useGen.trim()===\"\")){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:setLoader(true);if(!(user==={})){_context2.next=6;break;}return _context2.abrupt(\"return\");case 6:email=user.email;_context2.next=9;return fetch(\"/api/user/update-profile\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,name:useName,gender:useGen})});case 9:res=_context2.sent;_context2.next=12;return res.json();case 12:setLoader(false);if(res.ok){setUpdated(true);setTimeout(function(){setUpdated(false);},3000);setTimeout(function(){navigate(\"/\");},3500);}else navigate(\"/login\",{replace:true});return _context2.abrupt(\"return\");case 15:case\"end\":return _context2.stop();}}},_callee2);}));return _profileHandler.apply(this,arguments);}function nameHandler(event){setUseName(event.target.value);}function genHandler(event){var gen;if(document.getElementById('gen1').checked){gen=document.getElementById('gen1').value;setUseGen(gen);}else if(document.getElementById('gen2').checked){gen=document.getElementById('gen2').value;setUseGen(gen);}}return/*#__PURE__*/_jsxs(\"div\",{className:classes.layout,children:[/*#__PURE__*/_jsxs(\"form\",{className:classes.loginForm,onSubmit:profileHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.details,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\" \",required:true,className:classes.textBox,onBlur:nameHandler}),/*#__PURE__*/_jsx(\"label\",{className:classes.formLabel,children:\"Full Name*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.gen,onClick:genHandler,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Select Gender:\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"gen1\",name:\"gender\",value:\"Female\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"gen1\",children:\"Female\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"gen2\",name:\"gender\",value:\"Male\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"gen2\",children:\"Male\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"Submit\",className:classes.save,children:\"SAVE\"})]}),updated&&/*#__PURE__*/_jsx(NotificationCard,{value:\"Profile Updated Successfully\"}),loader&&/*#__PURE__*/_jsx(\"img\",{src:preloader,className:classes.load,alt:\"Loading...\"})]});}export default ProfileEdit;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/pages/profile/profileEdit.js"],"names":["React","useState","useEffect","useNavigate","GetCookie","NotificationCard","preloader","classes","ProfileEdit","props","useName","setUseName","useGen","setUseGen","user","setUser","updated","setUpdated","loader","setLoader","navigate","token","getData","fetch","method","headers","Authorization","res","json","data","ok","replace","profileHandler","event","preventDefault","trim","email","body","JSON","stringify","name","gender","setTimeout","nameHandler","target","value","genHandler","gen","document","getElementById","checked","layout","loginForm","details","textBox","formLabel","save","load"],"mappings":"sYAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,6BAA7B,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,C,wFAEA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA2B,CAEvB,cAA8BR,QAAQ,CAAC,GAAD,CAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA4BV,QAAQ,CAAC,GAAD,CAApC,yCAAOW,MAAP,eAAeC,SAAf,eACA,eAAwBZ,QAAQ,CAAC,EAAD,CAAhC,yCAAOa,IAAP,eAAaC,OAAb,eACA,eAA8Bd,QAAQ,CAAC,KAAD,CAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eACA,eAA4BhB,QAAQ,CAAC,KAAD,CAApC,0CAAOiB,MAAP,gBAAeC,SAAf,gBAEA,GAAIC,CAAAA,QAAQ,CAAGjB,WAAW,EAA1B,CAEA,GAAMkB,CAAAA,KAAK,CAAGjB,SAAS,CAAC,OAAD,CAAvB,CAEAF,SAAS,CAAC,UAAK,SAEIoB,CAAAA,OAFJ,+HAEX,sKAEsBC,CAAAA,KAAK,qBAAsB,CACzCC,MAAM,CAAE,KADiC,CAEzCC,OAAO,CAAC,CACJC,aAAa,kBAAYL,KAAZ,CADT,CAFiC,CAAtB,CAF3B,QAEUM,GAFV,qCASuBA,CAAAA,GAAG,CAACC,IAAJ,EATvB,QASUC,IATV,eAWI,GAAGF,GAAG,CAACG,EAAP,CACIf,OAAO,CAACc,IAAD,CAAP,CADJ,IAGIT,CAAAA,QAAQ,UAAW,CAAEW,OAAO,CAAE,IAAX,CAAX,CAAR,CAdR,sDAFW,0CAoBXT,OAAO,GACV,CArBQ,CAqBN,CAACD,KAAD,CArBM,CAAT,CAZuB,QAmCRW,CAAAA,cAnCQ,sJAmCvB,kBAA8BC,KAA9B,oIACIA,KAAK,CAACC,cAAN,GADJ,KAEOxB,OAAO,CAACyB,IAAR,KAAmB,EAAnB,EAAyBvB,MAAM,CAACuB,IAAP,KAAkB,EAFlD,oEAKIhB,SAAS,CAAC,IAAD,CAAT,CALJ,KAOOL,IAAI,GAAK,EAPhB,oEAUUsB,KAVV,CAUkBtB,IAAI,CAACsB,KAVvB,wBAYsBb,CAAAA,KAAK,CAAC,0BAAD,CAA6B,CAChDC,MAAM,CAAE,MADwC,CAEhDC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CAFwC,CAKhDY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEH,KAAK,CAAEA,KAAT,CAAgBI,IAAI,CAAE9B,OAAtB,CAA+B+B,MAAM,CAAE7B,MAAvC,CAAf,CAL0C,CAA7B,CAZ3B,QAYUe,GAZV,wCAoBUA,CAAAA,GAAG,CAACC,IAAJ,EApBV,SAsBIT,SAAS,CAAC,KAAD,CAAT,CAEA,GAAGQ,GAAG,CAACG,EAAP,CAAU,CACNb,UAAU,CAAC,IAAD,CAAV,CACAyB,UAAU,CAAC,UAAU,CAAEzB,UAAU,CAAC,KAAD,CAAV,CAAmB,CAAhC,CAAkC,IAAlC,CAAV,CACAyB,UAAU,CAAC,UAAU,CAAEtB,QAAQ,KAAR,CAAe,CAA5B,CAA8B,IAA9B,CAAV,CACH,CAJD,IAMIA,CAAAA,QAAQ,UAAW,CAAEW,OAAO,CAAE,IAAX,CAAX,CAAR,CA9BR,2FAnCuB,iDAoEvB,QAASY,CAAAA,WAAT,CAAqBV,KAArB,CAA2B,CACvBtB,UAAU,CAACsB,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAV,CACH,CACD,QAASC,CAAAA,UAAT,CAAoBb,KAApB,CAA0B,CACtB,GAAIc,CAAAA,GAAJ,CACA,GAAIC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,OAApC,CAA6C,CACzCH,GAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCJ,KAAtC,CACAhC,SAAS,CAACkC,GAAD,CAAT,CACH,CAHD,IAIK,IAAIC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,OAApC,CAA6C,CAC9CH,GAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCJ,KAAtC,CACAhC,SAAS,CAACkC,GAAD,CAAT,CACH,CACJ,CAED,mBACI,aAAK,SAAS,CAAExC,OAAO,CAAC4C,MAAxB,wBACI,cAAM,SAAS,CAAE5C,OAAO,CAAC6C,SAAzB,CAAoC,QAAQ,CAAIpB,cAAhD,wBACI,aAAK,SAAS,CAAEzB,OAAO,CAAC8C,OAAxB,wBACI,cACI,IAAI,CAAE,MADV,CAEI,WAAW,CAAC,GAFhB,CAGI,QAAQ,KAHZ,CAII,SAAS,CAAE9C,OAAO,CAAC+C,OAJvB,CAKI,MAAM,CAAIX,WALd,EADJ,cAQI,cAAO,SAAS,CAAEpC,OAAO,CAACgD,SAA1B,wBARJ,GADJ,cAaI,aAAK,SAAS,CAAEhD,OAAO,CAACwC,GAAxB,CAA6B,OAAO,CAAID,UAAxC,wBACI,yCADJ,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAE,MAAxB,CAA+B,IAAI,CAAC,QAApC,CAA6C,KAAK,CAAC,QAAnD,CAA4D,QAAQ,KAApE,EAFJ,cAII,cAAO,GAAG,CAAC,MAAX,oBAJJ,cAKI,cAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAE,MAAxB,CAA+B,IAAI,CAAC,QAApC,CAA6C,KAAK,CAAC,MAAnD,CAA0D,QAAQ,KAAlE,EALJ,cAOI,cAAO,GAAG,CAAC,MAAX,kBAPJ,GAbJ,cAuBI,eAAQ,IAAI,CAAE,QAAd,CAAuB,KAAK,CAAC,QAA7B,CAAsC,SAAS,CAAEvC,OAAO,CAACiD,IAAzD,kBAvBJ,GADJ,CA2BKxC,OAAO,eAAI,KAAC,gBAAD,EAAkB,KAAK,CAAI,8BAA3B,EA3BhB,CA4BKE,MAAM,eAAI,YAAK,GAAG,CAAIZ,SAAZ,CAAuB,SAAS,CAAEC,OAAO,CAACkD,IAA1C,CAAgD,GAAG,CAAG,YAAtD,EA5Bf,GADJ,CAgCH,CAED,cAAejD,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { GetCookie } from '../../hooks/cookies';\r\nimport NotificationCard from '../../card/notificationCard';\r\nimport preloader from '../../image/sectionLoader.gif';\r\nimport classes from './profileEdit.module.css';\r\n\r\nfunction ProfileEdit(props){\r\n\r\n    const [useName, setUseName] = useState(\" \");\r\n    const [useGen, setUseGen] = useState(\" \");\r\n    const [user, setUser] = useState({});\r\n    const [updated, setUpdated] = useState(false);\r\n    const [loader, setLoader] = useState(false);\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const token = GetCookie(\"token\");\r\n\r\n    useEffect(() =>{\r\n        \r\n        async function getData(){\r\n\r\n            const res = await fetch(`/api/user/profile`, {\r\n                method: \"GET\",\r\n                headers:{\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n        \r\n            const data = await res.json();\r\n            \r\n            if(res.ok)\r\n                setUser(data);\r\n            else\r\n                navigate(`/login`, { replace: true });  \r\n    \r\n        }\r\n\r\n        getData();\r\n    }, [token]);\r\n\r\n    async function profileHandler(event){\r\n        event.preventDefault();\r\n        if(useName.trim() === \"\" || useGen.trim() === \"\")\r\n            return;\r\n\r\n        setLoader(true);\r\n\r\n        if(user === {})\r\n            return;\r\n\r\n        const email = user.email;\r\n\r\n        const res = await fetch(\"/api/user/update-profile\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email: email, name: useName, gender: useGen  })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n        setLoader(false);\r\n            \r\n        if(res.ok){\r\n            setUpdated(true);\r\n            setTimeout(function(){ setUpdated(false);}, 3000);\r\n            setTimeout(function(){ navigate(`/`);}, 3500);\r\n        }\r\n        else\r\n            navigate(`/login`, { replace: true });  \r\n        return;\r\n    }\r\n    function nameHandler(event){\r\n        setUseName(event.target.value);\r\n    }\r\n    function genHandler(event){\r\n        var gen;\r\n        if (document.getElementById('gen1').checked) {\r\n            gen = document.getElementById('gen1').value;\r\n            setUseGen(gen);\r\n        }\r\n        else if (document.getElementById('gen2').checked) {\r\n            gen = document.getElementById('gen2').value;\r\n            setUseGen(gen);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <form className={classes.loginForm} onSubmit = {profileHandler}>\r\n                <div className={classes.details}>\r\n                    <input \r\n                        type= \"text\" \r\n                        placeholder=' ' \r\n                        required \r\n                        className={classes.textBox}\r\n                        onBlur = {nameHandler}>\r\n                    </input>\r\n                    <label className={classes.formLabel}>\r\n                       Full Name*\r\n                    </label>\r\n                </div>\r\n                <div className={classes.gen} onClick = {genHandler}>\r\n                    <p>Select Gender:&nbsp;</p>\r\n                    <input type=\"radio\" id= \"gen1\" name=\"gender\" value=\"Female\" required>\r\n                    </input>\r\n                    <label for=\"gen1\">Female</label>\r\n                    <input type=\"radio\" id= \"gen2\" name=\"gender\" value=\"Male\" required>\r\n                    </input>\r\n                    <label for=\"gen2\">Male</label>\r\n                </div>\r\n\r\n                <button type= \"submit\" value=\"Submit\" className={classes.save}>SAVE</button>\r\n\r\n            </form>\r\n            {updated && <NotificationCard value = {\"Profile Updated Successfully\"} />}\r\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileEdit;"]},"metadata":{},"sourceType":"module"}