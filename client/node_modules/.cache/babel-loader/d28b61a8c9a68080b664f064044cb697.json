{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{wishActions}from'../store/wishStore';import{cartActions}from'../store/cartStore';import WishAlertCard from'./wishAlertCard';import CloseIcon from'../icons/closeIcon';import classes from'./wishCard.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WishCard(props){var userSub=useSelector(function(state){return state.login.userData;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),size=_useState2[0],setSize=_useState2[1];//post cart data mongodb\nfunction postData(_x,_x2,_x3){return _postData.apply(this,arguments);}//post wish data mongodb\nfunction _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,cart,bill){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,cart:cart,bill:bill})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:case\"end\":return _context.stop();}}},_callee);}));return _postData.apply(this,arguments);}function postWishData(_x4,_x5){return _postWishData.apply(this,arguments);}function _postWishData(){_postWishData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,wish){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,wish:wish})});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _postWishData.apply(this,arguments);}var navigate=useNavigate();function routeChange(){var path=\"/shoes/\"+props.company.toLowerCase()+'-'+props.product.toLowerCase()+'/'+props.id;navigate(path);}var dispatch=useDispatch();function addItem(size){sizeHandler();if(size===\"0\")return;dispatch(cartActions.addItem({id:props.id,image:props.image,company:props.company,product:props.product,rating:props.rating,sp:props.sp,mrp:props.mrp,discount:props.discount,quantity:1,sz:size,delfee:0}));//store cart in mongodb\nvar email=userSub.email;var cart=JSON.parse(localStorage.getItem(\"products\"));var bill=JSON.parse(localStorage.getItem(\"billStore\"));postData(email,cart,bill);remItem();return;}function sizeHandler(event){if(size)setSize(false);else setSize(true);}function remItem(event){dispatch(wishActions.removeItem({id:props.id}));//store wish in mongodb\nvar email=userSub.email;var wish=JSON.parse(localStorage.getItem(\"wishStore\"));postWishData(email,wish);}return/*#__PURE__*/_jsxs(\"div\",{className:classes.card,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.image,onClick:routeChange,children:/*#__PURE__*/_jsx(\"img\",{src:props.image,alt:\"Shoe\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.desc,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.prdct,children:props.product}),/*#__PURE__*/_jsxs(\"p\",{className:classes.price,children:[\"\\u20B9\",props.sp,\"\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:classes.mrp,children:[\"\\u20B9\",props.mrp]}),\"\\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:classes.discount,children:[\"(\",props.discount,\"% off)\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.bag,onClick:sizeHandler,children:\"MOVE TO BAG\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.close,onClick:remItem,children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),size&&/*#__PURE__*/_jsx(\"div\",{className:classes.backdrop}),size&&/*#__PURE__*/_jsx(\"div\",{className:classes.wishAlert,children:/*#__PURE__*/_jsx(WishAlertCard,{confirmSize:addItem})})]});}export default WishCard;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/server/client/src/card/wishCard.js"],"names":["React","useState","useNavigate","useDispatch","useSelector","wishActions","cartActions","WishAlertCard","CloseIcon","classes","WishCard","props","userSub","state","login","userData","size","setSize","postData","email","cart","bill","fetch","method","headers","body","JSON","stringify","res","json","postWishData","wish","navigate","routeChange","path","company","toLowerCase","product","id","dispatch","addItem","sizeHandler","image","rating","sp","mrp","discount","quantity","sz","delfee","parse","localStorage","getItem","remItem","event","removeItem","card","desc","prdct","price","bag","close","backdrop","wishAlert"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { wishActions } from '../store/wishStore';\r\nimport { cartActions } from '../store/cartStore';\r\n\r\nimport WishAlertCard from './wishAlertCard';\r\nimport CloseIcon from '../icons/closeIcon';\r\nimport classes from './wishCard.module.css';\r\n\r\nfunction WishCard(props) {\r\n    const userSub = useSelector((state) => state.login.userData);\r\n\r\n    const [size, setSize] = useState(false);\r\n\r\n    //post cart data mongodb\r\n    async function postData(email, cart, bill){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, cart, bill })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n    //post wish data mongodb\r\n    async function postWishData(email, wish){\r\n\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, wish })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n\r\n    let navigate = useNavigate();\r\n    function routeChange(){ \r\n        let path = `/shoes/`+props.company.toLowerCase()+'-'+props.product.toLowerCase()+'/'+props.id; \r\n        navigate(path);\r\n    }\r\n\r\n    const dispatch = useDispatch();\r\n    function addItem(size){\r\n        sizeHandler();\r\n        if(size === \"0\")\r\n            return;\r\n        dispatch(cartActions.addItem({\r\n            id: props.id,\r\n            image: props.image,\r\n            company: props.company,\r\n            product: props.product,\r\n            rating: props.rating,\r\n            sp: props.sp,\r\n            mrp: props.mrp,\r\n            discount: props.discount,\r\n            quantity: 1,\r\n            sz: size,\r\n            delfee: 0,\r\n        }));\r\n\r\n        //store cart in mongodb\r\n        const email = userSub.email;\r\n        const cart = JSON.parse(localStorage.getItem(\"products\"));\r\n        const bill = JSON.parse(localStorage.getItem(\"billStore\"));\r\n\r\n        postData(email, cart, bill);\r\n    \r\n        remItem();\r\n        return;\r\n    }\r\n\r\n    function sizeHandler(event){\r\n        if(size)\r\n            setSize(false);\r\n        else\r\n            setSize(true);\r\n    }\r\n\r\n    function remItem(event){\r\n        dispatch(wishActions.removeItem({\r\n            id: props.id,\r\n        }));\r\n\r\n        //store wish in mongodb\r\n        const email = userSub.email;\r\n        const wish = JSON.parse(localStorage.getItem(\"wishStore\"));\r\n\r\n        postWishData(email, wish);\r\n        \r\n    }\r\n\r\n    return(\r\n        <div className={classes.card}>\r\n            <div className={classes.image} onClick = {routeChange}>\r\n                <img src = {props.image} alt = \"Shoe\"></img>\r\n           </div>\r\n           <div className={classes.desc}>\r\n                <p className={classes.prdct}>{props.product}</p>\r\n                <p className={classes.price}>&#8377;{props.sp}&nbsp;\r\n                    <span className={classes.mrp}>&#8377;{props.mrp}</span>&nbsp;\r\n                    <span className={classes.discount}>({props.discount}% off)</span>\r\n                </p>\r\n                <button type='button' className={classes.bag} onClick = {sizeHandler}>MOVE TO BAG</button>\r\n                <span className={classes.close} onClick = {remItem}><CloseIcon /></span>\r\n           </div>\r\n\r\n           {size && <div className= {classes.backdrop}/>}\r\n            {size && <div className={classes.wishAlert}><WishAlertCard confirmSize = {addItem} /></div>}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WishCard;"]},"metadata":{},"sourceType":"module"}