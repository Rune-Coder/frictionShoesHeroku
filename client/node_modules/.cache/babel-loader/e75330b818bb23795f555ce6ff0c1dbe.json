{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{useSelector}from'react-redux';import OrderProductCard from'../../card/orderProductCard';import loader from'../../image/sectionLoader.gif';import classes from'./orderView.module.css';import PhoneIcon from'../../icons/phoneIcon';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrderView(props){var _useParams=useParams(),oid=_useParams.oid;var userSub=useSelector(function(state){return state.login.userData;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];useEffect(function(){document.title='Order Details';window.scrollTo(0,0);});useEffect(function(){//get orders data mongodb\nfunction getOrders(_x){return _getOrders.apply(this,arguments);}function _getOrders(){_getOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok&&data.orders)setOrders(data.orders);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getOrders.apply(this,arguments);}getOrders(userSub.email);},[userSub.email]);if(orders.length===0){return/*#__PURE__*/_jsx(\"div\",{className:classes.load,children:/*#__PURE__*/_jsx(\"img\",{src:loader,alt:\"Loading...\"})});}var currOrder=orders.find(function(item){return item.order_id===oid;});if(!currOrder){return/*#__PURE__*/_jsx(\"div\",{className:classes.load,children:/*#__PURE__*/_jsx(\"img\",{src:loader,alt:\"Loading...\"})});}var _currOrder$date$split=currOrder.date.split(\"/\"),_currOrder$date$split2=_slicedToArray(_currOrder$date$split,3),dd=_currOrder$date$split2[0],mm=_currOrder$date$split2[1],yyyy=_currOrder$date$split2[2];var month=[\"\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var productList=currOrder.products.map(function(shoe){return/*#__PURE__*/_jsx(OrderProductCard,{id:shoe._id,image:shoe.image,company:shoe.company,product:shoe.product,rating:shoe.rating,sp:shoe.sp,mrp:shoe.mrp,discount:shoe.discount,quantity:shoe.quantity,size:shoe.sz},shoe._id);});return/*#__PURE__*/_jsxs(\"div\",{className:classes.layout,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:classes.head,children:\"Placed On:\"}),\"\\xA0\\xA0\",dd,\"\\xA0\",month[Number(mm)],\"\\xA0\",yyyy]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:classes.head,children:\"Order No:\"}),\"\\xA0\\xA0\",oid]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:classes.head,children:\"Total Amount:\"}),\"\\xA0\\u20B9\\xA0\",currOrder.bill[0].amount]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.head,children:\"Contact Details\"}),/*#__PURE__*/_jsxs(\"p\",{className:classes.mobNo,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.phone,children:/*#__PURE__*/_jsx(PhoneIcon,{})}),\"\\xA0\\xA0\",currOrder.address.mob]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.head,children:\"Shipping Address\"}),/*#__PURE__*/_jsx(\"p\",{className:classes.name,children:currOrder.address.name}),/*#__PURE__*/_jsxs(\"p\",{children:[currOrder.address.house,\",\\xA0\\xA0\",currOrder.address.town]}),/*#__PURE__*/_jsxs(\"p\",{children:[currOrder.address.city,\",\\xA0\\xA0\",currOrder.address.state,\"\\xA0-\\xA0\",currOrder.address.pin]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.head,children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{children:currOrder.payment})]}),productList]});}export default OrderView;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/pages/orderView/orderView.js"],"names":["React","useState","useEffect","useParams","useSelector","OrderProductCard","loader","classes","PhoneIcon","OrderView","props","oid","userSub","state","login","userData","orders","setOrders","document","title","window","scrollTo","getOrders","email","fetch","method","headers","body","JSON","stringify","res","json","data","ok","length","load","currOrder","find","item","order_id","date","split","dd","mm","yyyy","month","productList","products","map","shoe","_id","image","company","product","rating","sp","mrp","discount","quantity","sz","layout","head","Number","bill","amount","mobNo","phone","address","mob","name","house","town","city","pin","payment"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport OrderProductCard from '../../card/orderProductCard';\r\nimport loader from '../../image/sectionLoader.gif';\r\nimport classes from './orderView.module.css';\r\nimport PhoneIcon from '../../icons/phoneIcon';\r\n\r\nfunction OrderView(props){\r\n    const {oid} = useParams();\r\n    const userSub = useSelector((state) => state.login.userData);\r\n\r\n    const [orders, setOrders] = useState([]);\r\n\r\n    useEffect(() => {\r\n        document.title = 'Order Details';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    useEffect(() =>{\r\n\r\n        //get orders data mongodb\r\n        async function getOrders(email){\r\n\r\n            const res = await fetch(\"/api/user/history-get\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ email })\r\n            });\r\n        \r\n            const data = await res.json();\r\n                \r\n            if(res.ok && data.orders)\r\n                setOrders(data.orders);\r\n\r\n        }\r\n        getOrders(userSub.email);\r\n\r\n    }, [userSub.email]);\r\n\r\n    if(orders.length === 0){\r\n        return(\r\n            <div className={classes.load}>\r\n                <img src = {loader} alt = \"Loading...\"></img>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const currOrder = orders.find(item => item.order_id === oid);\r\n\r\n    if(!currOrder){\r\n        return(\r\n            <div className={classes.load}>\r\n                <img src = {loader} alt = \"Loading...\"></img>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const [dd, mm, yyyy] = currOrder.date.split(\"/\");\r\n    const month = [\"\", \"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];\r\n\r\n    const productList = currOrder.products.map((shoe) => (\r\n        <OrderProductCard \r\n            key = {shoe._id} \r\n            id = {shoe._id}\r\n            image = {shoe.image}\r\n            company = {shoe.company} \r\n            product = {shoe.product} \r\n            rating = {shoe.rating} \r\n            sp = {shoe.sp} \r\n            mrp = {shoe.mrp} \r\n            discount = {shoe.discount}\r\n            quantity = {shoe.quantity}\r\n            size = {shoe.sz}\r\n        />\r\n    ));\r\n\r\n    return(\r\n        <div className={classes.layout}>\r\n            <div>\r\n                <p><span className={classes.head}>Placed On:</span>&nbsp;&nbsp;{dd}&nbsp;{month[Number(mm)]}&nbsp;{yyyy}</p>\r\n                <p><span className={classes.head}>Order No:</span>&nbsp;&nbsp;{oid}</p>\r\n                <p><span className={classes.head}>Total Amount:</span>&nbsp;&#8377;&nbsp;{currOrder.bill[0].amount}</p>\r\n            </div>\r\n            <div>\r\n                <p className={classes.head}>Contact Details</p>\r\n                \r\n                <p className={classes.mobNo}><span className={classes.phone}><PhoneIcon /></span>&nbsp;&nbsp;{currOrder.address.mob}</p>\r\n            </div>\r\n            <div>\r\n                <p className={classes.head}>Shipping Address</p>\r\n                <p className={classes.name}>{currOrder.address.name}</p>\r\n                <p>{currOrder.address.house},&nbsp;&nbsp;{currOrder.address.town}</p>\r\n                <p>{currOrder.address.city},&nbsp;&nbsp;{currOrder.address.state}&nbsp;-&nbsp;{currOrder.address.pin}</p>\r\n            </div>\r\n            <div>\r\n                <p className={classes.head}>Payment Method</p>\r\n                <p>{currOrder.payment}</p>\r\n            </div>\r\n            {productList}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderView;"]},"metadata":{},"sourceType":"module"}