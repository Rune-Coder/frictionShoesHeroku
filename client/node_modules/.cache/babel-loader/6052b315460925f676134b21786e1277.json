{"ast":null,"code":"import _regeneratorRuntime from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Web Development/React-Project-1/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import CheckoutMenu from'../cart/checkoutMenu';import ProductBillCard from'../../card/productBillCard';import AddressForm from'./addressForm';import classes from'./address.module.css';import AddressSavedCard from'../../card/addressSavedCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Address(props){var userSub=useSelector(function(state){return state.login.userData;});var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];useEffect(function(){document.title='ADDRESS';window.scrollTo(0,0);});var bill;if(localStorage.getItem(\"billStore\")){bill=JSON.parse(localStorage.getItem(\"billStore\"));if(bill.tmrp===0)navigate(\"/\",{replace:true});}else{navigate(\"/\",{replace:true});}useEffect(function(){//post cart data mongodb\nfunction getAddress(_x){return _getAddress.apply(this,arguments);}function _getAddress(){_getAddress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok&&data.address)setAddress(data.address);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getAddress.apply(this,arguments);}getAddress(userSub.email);},[userSub.email]);var addressList=address.map(function(add){return/*#__PURE__*/_jsx(AddressSavedCard,{name:add.name,mobile:add.mobile,house:add.house,town:add.town,landmark:add.landmark,city:add.city,state:add.state,pin:add.pin},add._id);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CheckoutMenu,{value:\"add\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.address,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.savedAdd,children:addressList}),/*#__PURE__*/_jsx(\"div\",{className:classes.form,children:/*#__PURE__*/_jsx(AddressForm,{})}),/*#__PURE__*/_jsx(ProductBillCard,{tmrp:bill[0].tmrp,tdis:bill[0].tdis,tdelfee:bill[0].tdelfee,amount:bill[0].amount,itemQty:bill[0].len,value:\"info\"})]})]});}export default Address;","map":{"version":3,"sources":["D:/Web Development/React-Project-1/src/pages/address/address.js"],"names":["React","useState","useEffect","useSelector","useNavigate","CheckoutMenu","ProductBillCard","AddressForm","classes","AddressSavedCard","Address","props","userSub","state","login","userData","navigate","address","setAddress","document","title","window","scrollTo","bill","localStorage","getItem","JSON","parse","tmrp","replace","getAddress","email","fetch","method","headers","body","stringify","res","json","data","ok","addressList","map","add","name","mobile","house","town","landmark","city","pin","_id","savedAdd","form","tdis","tdelfee","amount","len"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport CheckoutMenu from '../cart/checkoutMenu';\r\nimport ProductBillCard from '../../card/productBillCard';\r\nimport AddressForm from './addressForm';\r\nimport classes from './address.module.css';\r\nimport AddressSavedCard from '../../card/addressSavedCard';\r\n\r\nfunction Address(props){\r\n\r\n    const userSub = useSelector((state) => state.login.userData);\r\n    let navigate = useNavigate();\r\n    const [address, setAddress] = useState([]);\r\n\r\n    useEffect(() => {\r\n        document.title = 'ADDRESS';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    var bill;\r\n    if(localStorage.getItem(\"billStore\")){\r\n        bill = JSON.parse(localStorage.getItem(\"billStore\"));\r\n        if(bill.tmrp === 0)\r\n            navigate(`/`, { replace: true });\r\n    }\r\n    else{\r\n        navigate(`/`, { replace: true });\r\n    }\r\n\r\n\r\n    useEffect(() =>{\r\n\r\n        //post cart data mongodb\r\n        async function getAddress(email){\r\n\r\n            const res = await fetch(\"/api/user/history-get\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ email })\r\n            });\r\n        \r\n            const data = await res.json();\r\n                \r\n            if(res.ok && data.address)\r\n                setAddress(data.address);\r\n\r\n        }\r\n        getAddress(userSub.email);\r\n\r\n    }, [userSub.email]);\r\n\r\n    const addressList = address.map((add) => (\r\n        <AddressSavedCard \r\n            key = {add._id} \r\n            name = {add.name}\r\n            mobile = {add.mobile}\r\n            house = {add.house} \r\n            town = {add.town} \r\n            landmark = {add.landmark} \r\n            city = {add.city} \r\n            state = {add.state} \r\n            pin = {add.pin} \r\n        />\r\n    ));\r\n\r\n    return(\r\n        <div>\r\n            <div>\r\n                <CheckoutMenu value = \"add\" />\r\n            </div>\r\n            <div className={classes.address}>\r\n                <div className={classes.savedAdd}>{addressList}</div>\r\n                <div className={classes.form}>\r\n                    <AddressForm />\r\n                </div>\r\n                <ProductBillCard \r\n                    tmrp = {bill[0].tmrp} \r\n                    tdis = {bill[0].tdis} \r\n                    tdelfee = {bill[0].tdelfee} \r\n                    amount = {bill[0].amount} \r\n                    itemQty = {bill[0].len}\r\n                    value = {\"info\"}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Address;"]},"metadata":{},"sourceType":"module"}