{"code":"(this.webpackJsonpreact_sample_1=this.webpackJsonpreact_sample_1||[]).push([[20],{130:function(e,t,a){e.exports={badge:\"paymentSuccess_badge__3giu8\",continue:\"paymentSuccess_continue__395j4\",layout:\"paymentSuccess_layout__3gQqb\",subHead:\"paymentSuccess_subHead__aac_L\"}},140:function(e,t,a){\"use strict\";a.r(t);var n=a(19),s=a.n(n),c=a(23),r=a(4),o=a(1),i=a(3),l=a(42),u=a(12),p=a(40),d=a(130),b=a.n(d),f=a(0);t.default=function(e){Object(o.useEffect)((function(){document.title=\"Online Shopping site for shoes in India | Friction\",window.scrollTo(0,0)}));var t=Object(i.g)(),a=Object(u.c)((function(e){return e.login.loggedin}));Object(o.useEffect)((function(){var e=localStorage.getItem(\"address\")?JSON.parse(localStorage.getItem(\"address\")):{};a&&e.pin||t(\"/\",{replace:!0})}),[t,a]);var n=Object(u.c)((function(e){return e.login.userData})),d=Object(o.useState)([]),g=Object(r.a)(d,2),m=g[0],j=g[1],O=Object(u.b)();function h(){return h=Object(c.a)(s.a.mark((function e(t,a){var n,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],c=[],e.next=4,fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:t,cart:n,bill:c,orders:a})});case 4:return r=e.sent,e.next=7,r.json();case 7:case\"end\":return e.stop()}}),e)}))),h.apply(this,arguments)}return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(\"/api/user/history-get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,a.ok&&n.orders&&j(n.orders);case 7:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(n.email)}),[n.email]),Object(f.jsxs)(\"div\",{className:b.a.layout,children:[Object(f.jsx)(\"div\",{children:Object(f.jsx)(\"span\",{className:b.a.badge,children:Object(f.jsx)(l.a,{})})}),Object(f.jsx)(\"p\",{children:\"Payment Successfull\"}),Object(f.jsx)(\"button\",{onClick:function(e){var a=localStorage.getItem(\"billStore\")?JSON.parse(localStorage.getItem(\"billStore\")):[{amount:0}],s=localStorage.getItem(\"products\")?JSON.parse(localStorage.getItem(\"products\")):[],c=localStorage.getItem(\"address\")?JSON.parse(localStorage.getItem(\"address\")):{},r=m.slice();r.push({order_id:\"\",status:\"processing\",bill:a,products:s,payment:\"Online\",address:c,date:\"\"}),function(e,t){h.apply(this,arguments)}(n.email,r),O(p.a.remAddress()),t(\"/orders\",{replace:!0})},className:b.a.continue,children:\"CONTINUE\"}),Object(f.jsx)(\"p\",{className:b.a.subHead,children:\"Please do not go back or refresh page\"})]})}}}]);","name":"static/js/20.641e7bf9.chunk.js","map":{"version":3,"sources":["static/js/20.641e7bf9.chunk.js"],"names":["this","push","module","exports","__webpack_require__","badge","continue","layout","subHead","__webpack_exports__","r","D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","react_router_dom__WEBPACK_IMPORTED_MODULE_4__","_icons_badgeCheckIcon__WEBPACK_IMPORTED_MODULE_5__","react_redux__WEBPACK_IMPORTED_MODULE_6__","_store_addressStore__WEBPACK_IMPORTED_MODULE_7__","_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8__","_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__","props","Object","document","title","window","scrollTo","navigate","login","state","loggedin","address","localStorage","getItem","JSON","parse","pin","replace","userSub","userData","_useState","_useState2","orders","setOrders","dispatch","_postOrders","a","mark","_callee2","email","cart","bill","res","wrap","_context2","prev","next","fetch","method","headers","body","stringify","sent","json","stop","apply","arguments","_getOrders","_callee","data","_context","ok","_x","getOrders","className","children","onClick","event","amount","products","currOrder","slice","order_id","status","payment","date","_x2","_x3","postOrders","remAddress"],"mappings":"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"},"input":"(this[\"webpackJsonpreact_sample_1\"] = this[\"webpackJsonpreact_sample_1\"] || []).push([[20],{\n\n/***/ 130:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"badge\":\"paymentSuccess_badge__3giu8\",\"continue\":\"paymentSuccess_continue__395j4\",\"layout\":\"paymentSuccess_layout__3gQqb\",\"subHead\":\"paymentSuccess_subHead__aac_L\"};\n\n/***/ }),\n\n/***/ 140:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19);\n/* harmony import */ var D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23);\n/* harmony import */ var D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3);\n/* harmony import */ var _icons_badgeCheckIcon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(42);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12);\n/* harmony import */ var _store_addressStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(40);\n/* harmony import */ var _paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(130);\n/* harmony import */ var _paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(0);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);\nfunction PaymentSuccess(props){Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function(){document.title='Online Shopping site for shoes in India | Friction';window.scrollTo(0,0);});var navigate=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_4__[/* useNavigate */ \"g\"])();var login=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__[/* useSelector */ \"c\"])(function(state){return state.login.loggedin;});Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function(){var address=localStorage.getItem(\"address\")?JSON.parse(localStorage.getItem(\"address\")):{};if(!login||!address.pin)navigate(\"/\",{replace:true});},[navigate,login]);var userSub=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__[/* useSelector */ \"c\"])(function(state){return state.login.userData;});var _useState=Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])([]),_useState2=Object(D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var dispatch=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__[/* useDispatch */ \"b\"])();Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function(){//get orders data mongodb\nfunction getOrders(_x){return _getOrders.apply(this,arguments);}function _getOrders(){_getOrders=Object(D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(email){var res,data;return D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/user/history-get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;if(res.ok&&data.orders)setOrders(data.orders);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getOrders.apply(this,arguments);}getOrders(userSub.email);},[userSub.email]);//post orders\nfunction postOrders(_x2,_x3){return _postOrders.apply(this,arguments);}function _postOrders(){_postOrders=Object(D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(email,orders){var cart,bill,res;return D_Web_Development_React_Project_1_server_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cart=[];bill=[];_context2.next=4;return fetch(\"/api/user/history-create\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,cart:cart,bill:bill,orders:orders})});case 4:res=_context2.sent;_context2.next=7;return res.json();case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _postOrders.apply(this,arguments);}function toOrder(event){var bill=localStorage.getItem(\"billStore\")?JSON.parse(localStorage.getItem(\"billStore\")):[{amount:0}];var products=localStorage.getItem(\"products\")?JSON.parse(localStorage.getItem(\"products\")):[];var address=localStorage.getItem(\"address\")?JSON.parse(localStorage.getItem(\"address\")):{};var currOrder=orders.slice();currOrder.push({order_id:\"\",status:\"processing\",bill:bill,products:products,payment:\"Online\",address:address,date:\"\"});postOrders(userSub.email,currOrder);dispatch(_store_addressStore__WEBPACK_IMPORTED_MODULE_7__[/* addressActions */ \"a\"].remAddress());navigate(\"/orders\",{replace:true});}return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsxs\"])(\"div\",{className:_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default.a.layout,children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(\"span\",{className:_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default.a.badge,children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(_icons_badgeCheckIcon__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"],{})})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(\"p\",{children:\"Payment Successfull\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(\"button\",{onClick:toOrder,className:_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default.a.continue,children:\"CONTINUE\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__[\"jsx\"])(\"p\",{className:_paymentSuccess_module_css__WEBPACK_IMPORTED_MODULE_8___default.a.subHead,children:\"Please do not go back or refresh page\"})]});}/* harmony default export */ __webpack_exports__[\"default\"] = (PaymentSuccess);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["D:\\Web Development\\React-Project-1\\server\\client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-5-0!D:\\Web Development\\React-Project-1\\server\\client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-5-1!D:\\Web Development\\React-Project-1\\server\\client\\node_modules\\postcss-loader\\src\\index.js??postcss!D:\\Web Development\\React-Project-1\\server\\client\\src\\pages\\paymentSuccess\\paymentSuccess.module.css","D:/Web Development/React-Project-1/server/client/src/pages/paymentSuccess/paymentSuccess.js"],"names":["PaymentSuccess","props","useEffect","document","title","window","scrollTo","navigate","useNavigate","login","useSelector","state","loggedin","address","localStorage","getItem","JSON","parse","pin","replace","userSub","userData","useState","orders","setOrders","dispatch","useDispatch","getOrders","email","fetch","method","headers","body","stringify","res","json","data","ok","postOrders","cart","bill","toOrder","event","amount","products","currOrder","slice","push","order_id","status","payment","date","addressActions","remAddress","classes","layout","badge","continue","subHead"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"badge\":\"paymentSuccess_badge__3giu8\",\"continue\":\"paymentSuccess_continue__395j4\",\"layout\":\"paymentSuccess_layout__3gQqb\",\"subHead\":\"paymentSuccess_subHead__aac_L\"};","import React, { useState, useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport BadgeCheckIcon from '../../icons/badgeCheckIcon';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { addressActions } from '../../store/addressStore';\r\nimport classes from './paymentSuccess.module.css';\r\n\r\nfunction PaymentSuccess(props){\r\n\r\n    useEffect(() => {\r\n        document.title = 'Online Shopping site for shoes in India | Friction';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n\r\n    let navigate = useNavigate();\r\n    const login = useSelector((state) => state.login.loggedin);\r\n\r\n    useEffect(() =>{\r\n\r\n        const address = localStorage.getItem(\"address\") ? JSON.parse(localStorage.getItem(\"address\")) : {};\r\n\r\n        if(!login || !address.pin)\r\n            navigate(`/`, { replace: true });\r\n\r\n    }, [navigate, login]);\r\n\r\n    \r\n    const userSub = useSelector((state) => state.login.userData);\r\n\r\n    const [orders, setOrders] = useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() =>{\r\n\r\n         //get orders data mongodb\r\n        async function getOrders(email){\r\n\r\n            const res = await fetch(\"/api/user/history-get\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ email })\r\n            });\r\n        \r\n            const data = await res.json();\r\n                \r\n            if(res.ok && data.orders)\r\n                setOrders(data.orders);\r\n        }\r\n        \r\n        getOrders(userSub.email);\r\n        \r\n    }, [userSub.email]);\r\n\r\n    //post orders\r\n    async function postOrders(email, orders){\r\n\r\n        const cart = [];\r\n        const bill = [];\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, cart, bill, orders })\r\n        });\r\n    \r\n        await res.json();\r\n    }\r\n\r\n\r\n    function toOrder(event){\r\n\r\n        const bill = localStorage.getItem(\"billStore\") ? JSON.parse(localStorage.getItem(\"billStore\")) : [{amount: 0}];\r\n        const products = localStorage.getItem(\"products\") ? JSON.parse(localStorage.getItem(\"products\")) : [];\r\n        const address = localStorage.getItem(\"address\") ? JSON.parse(localStorage.getItem(\"address\")) : {};\r\n\r\n        var currOrder = orders.slice();\r\n            currOrder.push({\r\n                order_id: \"\",\r\n                status: \"processing\",\r\n                bill: bill,\r\n                products: products,\r\n                payment: \"Online\",\r\n                address: address,\r\n                date: \"\"\r\n        });\r\n\r\n        postOrders(userSub.email, currOrder);\r\n\r\n        dispatch(addressActions.remAddress());\r\n\r\n        navigate(`/orders`, { replace: true });\r\n\r\n    }\r\n\r\n\r\n    return(\r\n        <div className={classes.layout}>\r\n            <div><span className={classes.badge}><BadgeCheckIcon /></span></div>\r\n            <p>Payment Successfull</p>\r\n            <button onClick = {toOrder} className={classes.continue}>CONTINUE</button>\r\n            <p className={classes.subHead}>Please do not go back or refresh page</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PaymentSuccess;"]}}