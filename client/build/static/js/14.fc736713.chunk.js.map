{"version":3,"sources":["pages/payment/paymentOptions.module.css","pages/payment/payment.module.css","pages/payment/paymentOptions.js","pages/payment/payment.js","image/sectionLoader.gif","pages/cart/checkoutMenu.js","pages/cart/checkoutMenu.module.css"],"names":["module","exports","PaymentOptions","props","bill","localStorage","getItem","JSON","parse","amount","products","address","useSelector","state","currAddress","userSub","login","userData","useState","loader","setLoader","navigate","useNavigate","dispatch","useDispatch","orders","setOrders","ops","setOps","email","a","cart","fetch","method","headers","body","stringify","res","json","data","ok","console","log","rzp_key","rzpKeyData","options","key","currency","name","description","image","order_id","id","callback_url","prefill","mobile","notes","theme","window","Razorpay","open","useEffect","getOrders","className","classes","paymentCard","summary","paymentOps","onClick","selectOps","check","subHead","event","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","currOrder","slice","push","status","payment","date","postOrders","addressActions","remAddress","replace","onlinePay","continue","src","preloader","load","alt","Payment","document","title","scrollTo","value","layout","CheckoutMenu","menu","menuList","active","line"],"mappings":"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","file":"static/js/14.fc736713.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"check\":\"paymentOptions_check__3mtwS\",\"continue\":\"paymentOptions_continue__1tfgn\",\"load\":\"paymentOptions_load__2RPrC\",\"paymentCard\":\"paymentOptions_paymentCard__duovL\",\"paymentOps\":\"paymentOptions_paymentOps__1x_bs\",\"selectOps\":\"paymentOptions_selectOps__2GLoX\",\"subHead\":\"paymentOptions_subHead__iLOaX\",\"summary\":\"paymentOptions_summary__ZW5B5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"payment_layout__3VLfj\"};","import React, { useState, useEffect } from 'react';\r\n\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport BadgeCheckIcon from '../../icons/badgeCheckIcon';\r\nimport classes from './paymentOptions.module.css';\r\nimport { addressActions } from '../../store/addressStore';\r\nimport preloader from '../../image/sectionLoader.gif';\r\n\r\nfunction PaymentOptions(props){\r\n    const bill = localStorage.getItem(\"billStore\") ? JSON.parse(localStorage.getItem(\"billStore\")) : [{amount: 0}];\r\n    const products = localStorage.getItem(\"products\") ? JSON.parse(localStorage.getItem(\"products\")) : [];\r\n    const address = useSelector((state) => state.address.currAddress);\r\n    const userSub = useSelector((state) => state.login.userData);\r\n    const [loader, setLoader] = useState(false);\r\n    let navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n\r\n    const [orders, setOrders] = useState([]);\r\n    const [ops, setOps] = useState(\" \");\r\n\r\n    useEffect(() =>{\r\n\r\n        //get orders data mongodb\r\n        async function getOrders(email){\r\n\r\n            const res = await fetch(\"/api/user/history-get\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ email })\r\n            });\r\n        \r\n            const data = await res.json();\r\n                \r\n            if(res.ok && data.orders)\r\n                setOrders(data.orders);\r\n\r\n        }\r\n        getOrders(userSub.email);\r\n\r\n    }, [userSub.email]);\r\n\r\n    //post orders\r\n    async function postOrders(email, orders){\r\n\r\n        const cart = [];\r\n        const bill = [];\r\n        const res = await fetch(\"/api/user/history-create\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, cart, bill, orders })\r\n        });\r\n    \r\n        await res.json();\r\n\r\n    }\r\n\r\n    function toOrders(){\r\n        navigate(`/orders`, { replace: true });\r\n    }\r\n\r\n    async function onlinePay(amount){\r\n\r\n        setLoader(true);\r\n\r\n        const res = await fetch(\"/api/payment/checkout\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ amount })\r\n        });\r\n    \r\n        const data = await res.json();\r\n            \r\n        if(res.ok && data)\r\n            console.log(data);\r\n        else\r\n            return;\r\n\r\n        const rzp_key = await fetch(\"/api/payment/key\", {\r\n            method: \"GET\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        });\r\n\r\n        const rzpKeyData = await rzp_key.json();\r\n\r\n        if(!rzp_key.ok || !rzpKeyData)\r\n            return;\r\n        setLoader(false);\r\n        const options = {\r\n            key: rzpKeyData, \r\n            amount: data.amount, \r\n            currency: \"INR\",\r\n            name: \"Friction\",\r\n            description: \"Online Shopping site for Shoes in India\",\r\n            image: \"/images/icon.png\",\r\n            order_id: data.id, \r\n            callback_url: \"/api/payment/verification\",\r\n            prefill: {\r\n                \"name\": userSub.name,\r\n                \"email\": userSub.email,\r\n                \"contact\": userSub.mobile\r\n            },\r\n            notes: {\r\n                \"address\": \"Razorpay Corporate Office\"\r\n            },\r\n            theme: {\r\n                \"color\": \"#446A46\"\r\n            }\r\n        };\r\n        var razor = new window.Razorpay(options);\r\n        razor.open();\r\n    }\r\n\r\n    function pay(event){\r\n\r\n        if(ops === \" \")\r\n            return;\r\n        else if(ops === \"cash\"){\r\n\r\n            var today = new Date();\r\n            var dd = String(today.getDate()).padStart(2, '0');\r\n            var mm = String(today.getMonth() + 1).padStart(2, '0');\r\n            var yyyy = today.getFullYear();\r\n\r\n            today = dd + '/' + mm + '/' + yyyy;\r\n\r\n            var currOrder = orders.slice();\r\n            currOrder.push({\r\n                order_id: \"\",\r\n                status: \"processing\",\r\n                bill: bill,\r\n                products: products,\r\n                payment: \"Cash\",\r\n                address: address,\r\n                date: today\r\n            });\r\n\r\n            postOrders(userSub.email, currOrder);\r\n\r\n            dispatch(addressActions.remAddress());\r\n\r\n            toOrders();\r\n\r\n        }\r\n        else{\r\n            onlinePay(bill[0].amount);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className={classes.paymentCard}>\r\n            <div className={classes.summary}>\r\n                Order Total &#8377; {bill[0].amount}\r\n            </div>\r\n            PAYMENT OPTIONS\r\n            <ul className={classes.paymentOps}>\r\n                <li onClick = {() => setOps(\"cash\")}>\r\n                    <div className={classes.selectOps}>Cash On Delivery\r\n                    {ops === \"cash\" && <span className={classes.check}><BadgeCheckIcon /></span>}</div>\r\n                </li>\r\n                <li onClick = {() => setOps(\"online\")}>  \r\n                    <div className={classes.selectOps}>Pay Now\r\n                    {ops === \"online\" && <span className={classes.check}><BadgeCheckIcon /></span>}</div>\r\n                    <div className={classes.subHead}>Debit Card, Credit Card, Net Banking, UPI</div>\r\n                </li>\r\n                <li><button onClick = {pay} className={classes.continue}>CONTINUE</button></li>\r\n                \r\n            </ul>\r\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PaymentOptions;","import React, { useEffect } from 'react';\r\n\r\nimport CheckoutMenu from '../cart/checkoutMenu';\r\nimport PaymentOptions from './paymentOptions';\r\nimport classes from './payment.module.css';\r\n\r\n\r\nfunction Payment(props){\r\n\r\n    useEffect(() => {\r\n        document.title = 'PAYMENT';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    return(\r\n        <div>\r\n            <div>\r\n                <CheckoutMenu value = \"pay\" />\r\n            </div>\r\n            <div className={classes.layout}>\r\n                <PaymentOptions />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Payment;","export default __webpack_public_path__ + \"static/media/sectionLoader.f418ba14.gif\";","import React from 'react';\r\nimport classes from './checkoutMenu.module.css';\r\n\r\nfunction CheckoutMenu(props){\r\n    return(\r\n        <div className={classes.menu}>\r\n            <ul className={classes.menuList}>\r\n                <li className={props.value === \"bag\" ? classes.active : ''}>B A G</li>\r\n                <li><hr className={classes.line} /></li>\r\n                <li className={props.value === \"add\" ? classes.active : ''}>A D D R E S S</li>\r\n                <li><hr className={classes.line} /></li>\r\n                <li className={props.value === \"pay\" ? classes.active : ''}>P A Y M E N T</li>\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CheckoutMenu;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"checkoutMenu_active__3dOCp\",\"line\":\"checkoutMenu_line__3wX-I\",\"menu\":\"checkoutMenu_menu__iAt5L\",\"menuList\":\"checkoutMenu_menuList__3rgKw\"};"],"sourceRoot":""}