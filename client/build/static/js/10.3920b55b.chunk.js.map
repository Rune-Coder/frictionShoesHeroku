{"version":3,"sources":["pages/signIn/otp.module.css","pages/signIn/otp.js","image/sectionLoader.gif","icons/closeIcon.js","card/notificationCard.js","card/notificationCard.module.css","card/toastCard.module.css","icons/checkIcon.js","card/toastCard.js"],"names":["module","exports","Otp","props","useEffect","document","title","window","scrollTo","location","useLocation","navigate","useNavigate","useState","sec","setSec","otpLen","setOtpLen","showToast","setShowToast","otp","setOtp","updated","setUpdated","loader","setLoader","getOtpEmail","state","email","src","preloader","className","classes","load","alt","autoFocus","seq","final","getElementById","value","length","focus","a","fetch","method","headers","body","JSON","stringify","res","json","data","ok","password","setTimeout","getOtp","finalOtp","Number","changePassword","otpHandler","event","target","layout","toast","close","rem","head","subHead","otpDetails","type","maxLength","required","id","textBox","onKeyUp","onChange","resendTimer","slice","resend","onClick","CloseIcon","xmlns","viewBox","d","NotificationCard","notificationHolder","msg","CheckIcon","ToastCard","checkBox","check","progress"],"mappings":"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","file":"static/js/10.3920b55b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"head\":\"otp_head__2yWGT\",\"layout\":\"otp_layout__23W0E\",\"otpDetails\":\"otp_otpDetails__QYpyA\",\"resend\":\"otp_resend__1O1F5\",\"resendTimer\":\"otp_resendTimer__2ZBAy\",\"subHead\":\"otp_subHead__2HUUr\",\"textBox\":\"otp_textBox__10beB\",\"toast\":\"otp_toast__9YpOC\",\"confirmToast\":\"otp_confirmToast__3UbVN\"};","import React, { useState, useEffect } from 'react';\r\n\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport NotificationCard from '../../card/notificationCard';\r\nimport preloader from '../../image/sectionLoader.gif';\r\nimport ToastCard from '../../card/toastCard';\r\nimport classes from './otp.module.css';\r\n\r\nfunction Otp(props){\r\n\r\n    useEffect(() => {\r\n        document.title = 'Online Shopping site for shoes in India | Friction';\r\n        window.scrollTo(0, 0);\r\n    });\r\n\r\n    const location = useLocation();\r\n\r\n    let navigate = useNavigate();\r\n\r\n\r\n    const [sec, setSec] = useState(60);\r\n    const [otpLen, setOtpLen] = useState(0);\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [otp, setOtp] = useState(0);\r\n    const [updated, setUpdated] = useState(false);\r\n    const [loader, setLoader] = useState(false);\r\n\r\n\r\n    useEffect(() =>{\r\n        if(otp === 0)\r\n            getOtpEmail(location.state.email);\r\n    }, [otp, location.state.email]);\r\n\r\n\r\n    if(!location.state){\r\n        return(\r\n            <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>\r\n        );\r\n    }\r\n\r\n    function autoFocus(seq, final){\r\n        const initial = document.getElementById(seq);\r\n        if(initial.value.length)\r\n            document.getElementById(final).focus();\r\n        return;\r\n    }\r\n\r\n    async function getOtpEmail(email){\r\n        const res = await fetch(\"/api/user/send-otp\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email })\r\n        });\r\n    \r\n        const data = await res.json();\r\n            \r\n        if(res.ok && data)\r\n            setOtp(data);\r\n    }\r\n\r\n    function otpResend(event){\r\n        setSec(60);\r\n        setOtp(0);\r\n        if(otp === 0)\r\n            getOtpEmail(location.state.email);\r\n        return;\r\n    }\r\n\r\n    async function  changePassword(email, password){\r\n\r\n        setLoader(true);\r\n\r\n        const res = await fetch(\"/api/user/update-password\", {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ email, password })\r\n        });\r\n\r\n        await res.json();\r\n\r\n        setLoader(false);\r\n        if(res.ok){\r\n            setUpdated(true);\r\n            setTimeout(function(){ setUpdated(false);}, 3000);\r\n            setTimeout(function(){ navigate(`/`);}, 3500);\r\n        }\r\n    }\r\n\r\n    function getOtp(){\r\n        const finalOtp = document.getElementById(\"first\").value+\r\n        document.getElementById(\"sec\").value+\r\n        document.getElementById(\"third\").value+\r\n        document.getElementById(\"fourth\").value+\r\n        document.getElementById(\"fifth\").value+\r\n        document.getElementById(\"sixth\").value;\r\n\r\n        if(Number(finalOtp) === otp){\r\n            \r\n            changePassword(location.state.email, location.state.password);\r\n            return;\r\n        }\r\n        else{\r\n            setShowToast(true);\r\n            setTimeout(function(){ setShowToast(false); }, 3000);\r\n            return;\r\n        }\r\n    }\r\n\r\n    function otpHandler(event){\r\n        const no = event.target.value;\r\n\r\n        if(no === \"\" && otpLen !== 0)\r\n            setOtpLen(otpLen-1);\r\n        else{\r\n            if(otpLen === 5)\r\n                getOtp();\r\n            setOtpLen(otpLen+1);\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    function timer(){\r\n        setSec(sec-1);\r\n        return;\r\n    }\r\n    function remToast(rem){\r\n        setShowToast(false);\r\n        return;\r\n    } \r\n\r\n    if(sec > 0)\r\n        setTimeout(timer, 1000);\r\n\r\n    return(\r\n        <div className={classes.layout}>\r\n        <div>\r\n            {showToast && <div className={classes.toast}> <ToastCard close = {remToast} value = \"Incorrect OTP\" /> </div>}\r\n            <form>\r\n                <p className={classes.head}>Verify with OTP</p>\r\n                <p className={classes.subHead}>Sent to {location.state.email}</p>\r\n                <div className={classes.otpDetails}>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"first\"}\r\n                        className={classes.textBox}\r\n                        onKeyUp={() => autoFocus(\"first\", 'sec')}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"sec\"}\r\n                        className={classes.textBox}\r\n                        onKeyUp={() => autoFocus(\"sec\", 'third')}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"third\"}\r\n                        className={classes.textBox}\r\n                        onKeyUp={() => autoFocus(\"third\", 'fourth')}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"fourth\"}\r\n                        className={classes.textBox}\r\n                        onKeyUp={() => autoFocus(\"fourth\", 'fifth')}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"fifth\"}\r\n                        className={classes.textBox}\r\n                        onKeyUp={() => autoFocus(\"fifth\", 'sixth')}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                    <input \r\n                        type= \"text\" \r\n                        maxLength= \"1\"\r\n                        required \r\n                        id= {\"sixth\"}\r\n                        className={classes.textBox}\r\n                        onChange = {otpHandler}\r\n                        >\r\n                    </input>\r\n                </div>\r\n                {sec > 0 && <p className={classes.resendTimer}>Resend OTP in 00:{(\"0\" + sec).slice(-2)}</p>}\r\n                {!sec && <p className={classes.resend} onClick = {otpResend}>RESEND OTP</p>}\r\n            </form>\r\n            {updated && <NotificationCard value = {\"Password Updated Successfully\"} />}\r\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\r\n        </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Otp;","export default __webpack_public_path__ + \"static/media/sectionLoader.f418ba14.gif\";","import React from 'react';\r\n\r\nfunction CloseIcon(){\r\n    return(\r\n        <svg \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            viewBox=\"0 0 320 512\">\r\n            <path d=\"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default CloseIcon;","import React from 'react';\r\n\r\nimport classes from './notificationCard.module.css';\r\n\r\nfunction NotificationCard(props){\r\n\r\n    return(\r\n        <div className={classes.notificationHolder}>\r\n        <div className={classes.layout}>\r\n            <p className={classes.msg}>{props.value}</p>\r\n        </div>  \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NotificationCard","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"notificationCard_layout__1cSqA\",\"notificationHolder\":\"notificationCard_notificationHolder__16Fvo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"check\":\"toastCard_check__1jG2B\",\"close\":\"toastCard_close__3_FYz\",\"checkBox\":\"toastCard_checkBox__1xnc1\",\"layout\":\"toastCard_layout__24BmN\",\"msg\":\"toastCard_msg__3Fvj_\",\"progress\":\"toastCard_progress__18ckt\",\"bar\":\"toastCard_bar__4YvrY\"};","import React from 'react';\r\n\r\nfunction CheckIcon(){\r\n    return(\r\n        <svg \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            viewBox=\"0 0 448 512\">\r\n            <path d=\"M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default CheckIcon;","import React from 'react';\r\n\r\nimport CheckIcon from '../icons/checkIcon';\r\nimport CloseIcon from '../icons/closeIcon';\r\nimport classes from './toastCard.module.css';\r\n\r\nfunction ToastCard(props){\r\n    function closeHandler(event){\r\n        props.close(1);\r\n    }\r\n\r\n    return(\r\n        <div className={classes.layout}>\r\n            <span className={classes.close} onClick={closeHandler}><CloseIcon /></span>\r\n            <div className={classes.checkBox}><span className={classes.check}><CheckIcon /></span></div>\r\n            <p className={classes.msg}>{props.value}</p>\r\n            <div className={classes.progress}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ToastCard;"],"sourceRoot":""}